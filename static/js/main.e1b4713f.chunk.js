(this["webpackJsonptrip-advisor"]=this["webpackJsonptrip-advisor"]||[]).push([[0],{14:function(e,t,a){e.exports={locationAll:"locationDetail_locationAll__kgg_o",right:"locationDetail_right__2Lw4_",left:"locationDetail_left__3Jgxr",banner:"locationDetail_banner__2SVsJ",bannerName:"locationDetail_bannerName__vxWfW",bannerDes:"locationDetail_bannerDes__1fEgq",bannerPhoto:"locationDetail_bannerPhoto__3Jcyl",navBar:"locationDetail_navBar__175yc",navBarList:"locationDetail_navBarList__3Q82A",title:"locationDetail_title__2JnI7",locationInput:"locationDetail_locationInput__3qElD",location:"locationDetail_location__1GpwA",locationShow:"locationDetail_locationShow__3rXhg",titleShow:"locationDetail_titleShow__2xlgb",itemCardName:"locationDetail_itemCardName__1wO5F",item:"locationDetail_item__2SzPu",itemPhoto:"locationDetail_itemPhoto__1F8oB",itemSelect:"locationDetail_itemSelect__1dgtC",selectDetail:"locationDetail_selectDetail__2TP0K",itemName:"locationDetail_itemName__3-eZl",itemSelectPhoto:"locationDetail_itemSelectPhoto__1dAgU",redLike:"locationDetail_redLike__64uT1",grayLike:"locationDetail_grayLike__YwfvJ",hideLike:"locationDetail_hideLike__3htBg",itemTitle:"locationDetail_itemTitle__FYgRN",itemComment:"locationDetail_itemComment__3XMBH",marker:"locationDetail_marker__mIOvk",icon1:"locationDetail_icon1__12Vhw",open:"locationDetail_open__2reQU",ratings:"locationDetail_ratings__1Kx2B","full-stars":"locationDetail_full-stars__LH9-R","empty-stars":"locationDetail_empty-stars__1t5YO",itemOpenTime:"locationDetail_itemOpenTime__2yc4l"}},15:function(e,t,a){e.exports={locationInput:"location_locationInput__vGbK3",content:"location_content__1BBlJ",content__container:"location_content__container__1_bAG",opacity:"location_opacity__3VmLQ",content__container__text:"location_content__container__text__XUYs4",content__container__list:"location_content__container__list__ACnvg",change:"location_change__1ufDx",content__container__list__item:"location_content__container__list__item__1sWxe",cont:"location_cont__3mpsV",cont__inner:"location_cont__inner__2F8Wd",el__bg:"location_el__bg__28SlE",el:"location_el__3ztg3","s--active":"location_s--active__1wKrd",el__overflow:"location_el__overflow__2i69K",el__inner:"location_el__inner__10VH6","s--inactive":"location_s--inactive__5LXPe","s--el-active":"location_s--el-active__2Bwwl","el__preview-cont":"location_el__preview-cont__1Yxwu",el__heading:"location_el__heading__1glPN",el__content:"location_el__content__Zstz9",el__text:"location_el__text__3G1FZ","el__close-btn":"location_el__close-btn__8a0-i",el__index:"location_el__index__b9um3","el__index-back":"location_el__index-back__3dBnu","el__index-front":"location_el__index-front__3Ocj2","el__index-overlay":"location_el__index-overlay__2LmvE",menu:"location_menu__3KKu1"}},17:function(e,t,a){e.exports={member:"member_member__36zxE",wrap:"member_wrap__kpKOT",loginContainer:"member_loginContainer__1z_ok",image:"member_image__1rh9g",layer:"member_layer__3Luzn",panel:"member_panel__2eDol",loginPanel:"member_loginPanel__3g4YR",signupPanel:"member_signupPanel__1pULS",changeState:"member_changeState__2F_8t",title:"member_title__1XMDO",container:"member_container__WuULa",signinItem:"member_signinItem__3MJHY",signinTitle:"member_signinTitle__3IITk",alert:"member_alert__35TRu",btn:"member_btn__40NDZ",changeSingup:"member_changeSingup__skdyZ",divider:"member_divider__18wsc",socialSignin:"member_socialSignin__J_i_8"}},20:function(e,t,a){e.exports={profile:"profile_profile__3t1s8",wrap:"profile_wrap__w5cQN",profileLeft:"profile_profileLeft__2lqGA",user:"profile_user__1qBUC",userImg:"profile_userImg__hw04j",userName:"profile_userName__3ZwyQ",userEmail:"profile_userEmail__3-g3o",userList:"profile_userList__1HoWh",logOut:"profile_logOut__1Lv5g",profileRight:"profile_profileRight__3R2hV",listTitle:"profile_listTitle__1zO_E",travelNumber:"profile_travelNumber__1yzNj",travelNum:"profile_travelNum__2OJhg",nowTravelList:"profile_nowTravelList__1pC2U",nowTravelListDetail:"profile_nowTravelListDetail__3RjcA",travelTitle:"profile_travelTitle__2qXSm",travelDateAll:"profile_travelDateAll__UYf1G",buttons1:"profile_buttons1__f33aH",start:"profile_start__3Hfgt",buttons2:"profile_buttons2__3B6uV",buttons3:"profile_buttons3__XbppA",buttonsLogout:"profile_buttonsLogout__1ykCB"}},26:function(e,t,a){e.exports={app:"App_app__3S3eq",flexWrap:"App_flexWrap__2lNRF",icon:"App_icon__3rkLN",active:"App_active__2deSF",hide:"App_hide__2LPdu",menu:"App_menu__2VuHF","menu-item":"App_menu-item__2KY2o","menu-open-button":"App_menu-open-button__2a8lx","menu-open":"App_menu-open__1uT1X",hamburger:"App_hamburger__33ioe","hamburger-1":"App_hamburger-1__2yPrD","hamburger-2":"App_hamburger-2__1gyIn","hamburger-3":"App_hamburger-3__218j8",loading:"App_loading__x0jdt",dot:"App_dot__w_98E",wave:"App_wave__2XxES",alert:"App_alert__pF-A4",mobileNav:"App_mobileNav__1T2KR"}},4:function(e,t,a){e.exports={scheduleNav:"schedule_scheduleNav__1_tqN",scheduleListAll:"schedule_scheduleListAll__2QeDR",scheduleListDetail:"schedule_scheduleListDetail__3qMA0",All:"schedule_All__36SY-",tag:"schedule_tag__1Lsc4",scheduleList:"schedule_scheduleList__NO_eD",scheduleTitle:"schedule_scheduleTitle__1YDf7",date:"schedule_date__2GO-0",userList:"schedule_userList__3LsVd",border:"schedule_border__2eJBF",userListClick:"schedule_userListClick__3KeEp",userListUnclick:"schedule_userListUnclick__2Z0pP",scheduleLayout:"schedule_scheduleLayout__29TPw",scheduleListRange:"schedule_scheduleListRange__14W2t",scheduleNavMain:"schedule_scheduleNavMain__1smW6",Nav:"schedule_Nav__3I3HK",liClick:"schedule_liClick__3tR_J",liUnclick:"schedule_liUnclick__3_748",schedulePhoto:"schedule_schedulePhoto__37BkL",scheduleDetail:"schedule_scheduleDetail__vGFeD",emptyList:"schedule_emptyList__2h6ZB",emptyListHide:"schedule_emptyListHide__3yJjo",scheduleAll:"schedule_scheduleAll__2Mnlj",scheduleWithMap:"schedule_scheduleWithMap__1vazH",scheduleDateAll:"schedule_scheduleDateAll__31z0_",scheduleDateSelect:"schedule_scheduleDateSelect__3iMMI",scheduleDateTitle:"schedule_scheduleDateTitle__2BQP0",scheduleDateDetail:"schedule_scheduleDateDetail__3H42m",scheduleDateOnly:"schedule_scheduleDateOnly__2yywU",scheduleDetailForDrop:"schedule_scheduleDetailForDrop__1VRt7",btn:"schedule_btn__3rKfx",t1:"schedule_t1__381zL",t2:"schedule_t2__2jO7X",btnClick:"schedule_btnClick__36wOD",switchBtn:"schedule_switchBtn__mkTm2",triangle:"schedule_triangle__1zxRw",switchBtnClick:"schedule_switchBtnClick__ZHO00",schedule:"schedule_schedule__3o9Cp",scheduleListTopLeft:"schedule_scheduleListTopLeft__36KOl",arrowBounce:"schedule_arrowBounce__ZVubf",bounce:"schedule_bounce__l7qE3",arrowBounceRotate:"schedule_arrowBounceRotate__2yzOC",scheduleLayer:"schedule_scheduleLayer__3puEK",date2:"schedule_date2__1lqLN",item:"schedule_item__UDFGa",itemList:"schedule_itemList__2z7wa",itemPhoto:"schedule_itemPhoto__3grB0",itemListDelete:"schedule_itemListDelete__OwiN7",itemLike:"schedule_itemLike__rI0GL",searchLike:"schedule_searchLike__26w5O",locationSection:"schedule_locationSection__3O3Gy",locationSectionShow:"schedule_locationSectionShow__rJlw-",listShow:"schedule_listShow___Tln4",displayNone:"schedule_displayNone__1RzU1",searchAll:"schedule_searchAll__1szFM",searchAllShow:"schedule_searchAllShow__tQthC",locationList:"schedule_locationList__2UEoS",locationListShow:"schedule_locationListShow__SndmB",locationDetail:"schedule_locationDetail__37o4h",likeList:"schedule_likeList__2sicR",likeListShow:"schedule_likeListShow__3VeUy",scheduleMap:"schedule_scheduleMap__3ERXu",markerText:"schedule_markerText__3eU_A",itemTraffic:"schedule_itemTraffic__2wlQ8",itemTrafficHide:"schedule_itemTrafficHide__3P-K-",trafficLength:"schedule_trafficLength__zXM5T",trafficLengthHide:"schedule_trafficLengthHide__3HDQb",itemSelect:"schedule_itemSelect__nW2in",scheduleListAdd:"schedule_scheduleListAdd__e0RAP",addSchedule:"schedule_addSchedule__1a8xb",ml5:"schedule_ml5__3JwO8",textWrapper:"schedule_textWrapper__2F-6q",line:"schedule_line__2cgpr",ampersand:"schedule_ampersand__3xxkh",lettersLeft:"schedule_lettersLeft__33_Ib",lettersRight:"schedule_lettersRight__38d6b",DateRangePickerInput_clearDates:"schedule_DateRangePickerInput_clearDates__3PrRj",titleInput:"schedule_titleInput__Ux1YQ",dateInputAll:"schedule_dateInputAll__3hmwJ",DateInput:"schedule_DateInput__2JjWa",inputSubmit:"schedule_inputSubmit__1ZiHu",wrapper:"schedule_wrapper__6TzCn",button:"schedule_button__3cEKX",ratings:"schedule_ratings__2yJZf","full-stars":"schedule_full-stars__20fYj","empty-stars":"schedule_empty-stars__kRLtk",redLike:"schedule_redLike__3huKQ",grayLike:"schedule_grayLike__1G9VX",hideLike:"schedule_hideLike__1d8VF",locationSearchDetail:"schedule_locationSearchDetail__26o-X",sheen:"schedule_sheen__lcKUs"}},551:function(e,t){},655:function(e,t,a){"use strict";a.r(t);var i=a(1),n=a(2),s=a.n(n),c=a(30),l=a.n(c),o=a(21),r=a(22),d=a(24),u=a(23),h=a(93),p=a(15),m=a.n(p),j=a(85),_=a.n(j),b=a(127),f=a(161);a(341),a(342);f.a.initializeApp({apiKey:"AIzaSyBLNfKTV-4Uo1qYcp1ABcd3Rj51qkN7FbQ",authDomain:"tripadvisor-abc.firebaseapp.com",databaseURL:"https://tripadvisor-abc.firebaseio.com",projectId:"tripadvisor-abc",storageBucket:"tripadvisor-abc.appspot.com",messagingSenderId:"385058100845",appId:"1:385058100845:web:e14c078e62560948f99164",measurementId:"G-WJKPTNBC2F"}),f.a.firestore();var v=f.a,O=v.firestore();function g(e){return x.apply(this,arguments)}function x(){return(x=Object(b.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){O.collection("indexCountry").orderBy("name").startAt(t).endAt(t+"\uf8ff").get().then((function(t){if(t.empty)return e([]);var a=[];return t.forEach((function(e){var t={value:e.id,label:e.data().name};a.push(t)})),e(a)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=Object(b.a)(_.a.mark((function e(t,a){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){O.collection("country").doc(a).collection("location").orderBy("plainName").startAt(t).endAt(t+"\uf8ff").get().then((function(t){if(t.empty)return e([]);var a=[];return t.forEach((function(e){var t={value:e.id,label:e.data().tagName};a.push(t)})),e(a)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return Number(e)/5.4*100}function D(e){window.setTimeout((function(){return document.getElementById(e).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}),10)}function N(e){O.collection("schedule").doc(e).set({like:[]},{merge:!0})}function w(e,t){O.collection("schedule").doc(e).set({like:t},{merge:!0})}var k=function(e){return O.collection("country").doc(e).collection("location").get()},L=function(e){return O.collection("schedule").doc(e)},C=function(e,t,a,i){return O.collection("schedule").doc(e).collection("data").doc("travel".concat(t)).collection("dateBlockDetail").doc(a).set({morning:i,name:a})};function I(e){window.location.pathname.substring(1,9)===e&&(document.querySelector("nav").style.backgroundColor="white",document.querySelector("nav").style.boxShadow="0 0 8px rgba(0, 0, 0, 0.2)",document.getElementById("MainTitle").style.color="rgb(138, 134, 134)",document.getElementById("mobileNav1").style.color="rgb(138, 134, 134)",document.getElementById("mobileNav2").style.color="rgb(138, 134, 134)",document.getElementById("mobileNav3").style.color="rgb(138, 134, 134)",document.getElementById("mobileNav").style.backgroundColor="rgba(245, 247, 249, 0.947)")}var E=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var i;return Object(o.a)(this,a),(i=t.call(this,e)).componentDidMount=function(){var e;e="/",window.location.pathname===e&&(document.querySelector("nav").style.backgroundColor="transparent",document.querySelector("nav").style.boxShadow="0 0 0",document.getElementById("MainTitle").style.color="white",document.getElementById("mobileNav1").style.color="white",document.getElementById("mobileNav2").style.color="white",document.getElementById("mobileNav3").style.color="white",document.getElementById("mobileNav").style.backgroundColor="transparent");var t=document.querySelector(".".concat(m.a.cont)),a=[].slice.call(document.querySelectorAll(".".concat(m.a.el))),i=[].slice.call(document.querySelectorAll(".".concat(m.a["el__close-btn"])));setTimeout((function(){t.classList.remove(m.a["s--inactive"])}),500),a.forEach((function(e){e.addEventListener("click",(function(){this.classList.contains(".".concat(m.a["s--active"]))||(t.classList.add(m.a["s--el-active"]),this.classList.add(m.a["s--active"]))}))})),i.forEach((function(e){e.addEventListener("click",(function(e){e.stopPropagation(),t.classList.remove(m.a["s--el-active"]),document.querySelector(".".concat(m.a["s--active"])).classList.remove(m.a["s--active"])}))}))},i.handleOnChange=function(e){document.getElementById("loading").style.display="flex",document.getElementById("loading").style.backgroundColor="#252525",i.props.history.push("/locationDetail/".concat(e.label))},i.state={selectedTag:[]},i.options=[{value:"\u53f0\u5317",label:"\u53f0\u5317",description:"\u5145\u6eff\u73fe\u4ee3\u6c1b\u570d\u7684\u53f0\u7063\u9996\u90fd\u3002\u666f\u9ede\u5305\u542b\u77e5\u540d\u591c\u5e02\u548c\u570b\u7acb\u6545\u5bae\u535a\u7269\u9662\u3002"},{value:"\u5df4\u9ece",label:"\u5df4\u9ece",description:"\u6cd5\u570b\u9996\u90fd\u3002\u827e\u83f2\u723e\u9435\u5854\u3001\u7f85\u6d6e\u5bae\u3001\u8056\u6bcd\u9662\u3001\u9732\u5929\u5496\u5561\u5e97\u548c\u9ad8\u7d1a\u6642\u5c1a\u7684\u6240\u5728\u5730\u3002"},{value:"\u6155\u5c3c\u9ed1",label:"\u6155\u5c3c\u9ed1",description:"\u5fb7\u570b\u5df4\u4f10\u5229\u4e9e\u90a6\u7684\u9996\u5e9c\u3002\u4ee5\u5341\u6708\u7bc0\u3001\u7687\u5bb6\u5564\u9152\u5c4b\u548c\u6155\u5c3c\u9ed1\u738b\u5bae\u8207\u535a\u7269\u9928\u805e\u540d\u3002"},{value:"\u65b0\u52a0\u5761",label:"\u65b0\u52a0\u5761",description:"\u4ee5\u5df4\u6771\u3001\u4f5b\u7259\u5bfa\u9f8d\u83ef\u9662\u548c\u70cf\u7bc0\u8def\u8cfc\u7269\u4e2d\u5fc3\u805e\u540d\u7684\u570b\u969b\u91d1\u878d\u4e2d\u5fc3\u3002"},{value:"\u6771\u4eac",label:"\u6771\u4eac",description:"\u6469\u5929\u5927\u6a13\u3001\u535a\u7269\u9928\u3001\u7687\u5c45\u548c\u660e\u6cbb\u795e\u5bae\u6240\u5728\u7684\u65e5\u672c\u9996\u90fd\u3002"},{value:"\u7d10\u7d04",label:"\u7d10\u7d04"}],i}return Object(r.a)(a,[{key:"render",value:function(){for(var e=[],t=0;t<5;t++){var a=Object(i.jsxs)("div",{className:m.a.el,children:[Object(i.jsx)("div",{className:m.a.el__overflow,children:Object(i.jsxs)("div",{className:m.a.el__inner,children:[Object(i.jsx)("div",{className:m.a.el__bg}),Object(i.jsx)("div",{className:m.a["el__preview-cont"],children:Object(i.jsx)("h2",{className:m.a.el__heading,children:this.options[t].value})}),Object(i.jsxs)("div",{className:m.a.el__content,children:[Object(i.jsx)("div",{className:m.a.el__text,children:this.options[t].description}),Object(i.jsx)("div",{className:m.a["el__close-btn"]})]})]})}),Object(i.jsxs)("div",{className:m.a.el__index,children:[Object(i.jsx)("div",{className:m.a["el__index-back"],children:t+1}),Object(i.jsx)("div",{className:m.a["el__index-front"],children:Object(i.jsx)("div",{className:m.a["el__index-overlay"],"data-index":t+1,children:t+1})})]})]},t);e.push(a)}return Object(i.jsxs)("div",{className:"".concat(m.a.cont," ").concat(m.a["s--inactive"]),children:[Object(i.jsx)("div",{className:m.a.content,children:Object(i.jsxs)("div",{className:m.a.content__container,children:[Object(i.jsx)("p",{className:m.a.content__container__text,children:"Hello"}),Object(i.jsxs)("ul",{className:m.a.content__container__list,children:[Object(i.jsx)("li",{className:m.a.content__container__list__item,children:"Taipei !"}),Object(i.jsx)("li",{className:m.a.content__container__list__item,children:"Paris !"}),Object(i.jsx)("li",{className:m.a.content__container__list__item,children:"Munich !"}),Object(i.jsx)("li",{className:m.a.content__container__list__item,children:"Singapore!"})]})]})}),Object(i.jsx)(h.a,{className:m.a.locationInput,loadOptions:g,onChange:this.handleOnChange,defaultOptions:this.options,placeholder:Object(i.jsx)("div",{children:"\u8f38\u5165\u60f3\u53bb\u7684\u9996\u90fd \xa0\xa0 ex.\u53f0\u5317"})}),Object(i.jsx)("div",{className:m.a.cont__inner,children:e})]})}}]),a}(s.a.PureComponent),P=a(49),T=a(52),B=a(14),A=a.n(B),U=function(e){var t=Object(n.useState)("hide"),a=Object(T.a)(t,2),s=a[0],c=a[1];return Object(n.useEffect)((function(){var t=e.likeList.find((function(t){return t.id===e.item.id}));c(void 0!==t?"showRed":"hide")}),[e.likeList]),Object(i.jsxs)("div",{id:e.item.id,onClick:function(t){return e.markerClickHandler(t.target.tagName,e.item,Math.floor(e.i/3))},className:A.a.item,onMouseOver:function(){e.likeList.find((function(t){return t.id===e.item.id}))?c("showRed"):c("showGray")},onMouseLeave:function(){e.likeList.find((function(t){return t.id===e.item.id}))||c("hide")},children:[Object(i.jsx)("img",{src:e.item.photo,className:A.a.itemPhoto}),Object(i.jsx)("div",{className:A.a.itemCardName,children:e.item.name}),Object(i.jsxs)("div",{className:A.a.ratings,children:[Object(i.jsx)("div",{className:A.a["empty-stars"]}),Object(i.jsx)("div",{className:A.a["full-stars"],style:{width:y(e.item.star_level)}})]}),Object(i.jsx)("div",{id:"like-".concat(e.item.id),className:"hide"===s?A.a.hideLike:"showRed"===s?A.a.redLike:A.a.grayLike,onClick:function(){return function(t){var a=Object(P.a)(e.likeList),i={country:t.country,name:t.name,id:t.id,photo:t.photo,star_level:t.star_level,pos:{lat:t.latitude,lng:t.longitude}};if(0===a.length)a.push(i),w(e.userId,a);else if(a.find((function(e){return e.id===t.id}))){c("showGray");var n=a.filter((function(e){return e.id!==t.id}));w(e.userId,n)}else c("showRed"),a.push(i),w(e.userId,a)}(e.item)},children:Object(i.jsxs)("svg",{id:"icon-heart",viewBox:"0 0 32 32",width:"35",height:"23",children:[Object(i.jsx)("title",{children:"heart"}),Object(i.jsx)("path",{d:"M29.306 4.768c-1.662-1.66-3.958-2.687-6.493-2.687s-4.831 1.027-6.493 2.687l-0.32 0.32-0.32-0.32c-1.662-1.664-3.96-2.694-6.498-2.694-5.072 0-9.183 4.112-9.183 9.183 0 2.534 1.026 4.828 2.686 6.49l11.363 11.373c0.499 0.496 1.187 0.803 1.947 0.803s1.448-0.307 1.947-0.803l11.353-11.36c1.671-1.66 2.705-3.96 2.705-6.501 0-2.536-1.030-4.832-2.695-6.491l-0-0z"})]})})]})},M=s.a.memo(U),R=a(11),F=a(12),z=function(e){return Object(i.jsxs)("div",{id:"show",className:A.a.itemSelect,children:[Object(i.jsx)("img",{src:e.place.photo,className:A.a.itemSelectPhoto}),Object(i.jsxs)("div",{className:A.a.selectDetail,children:[Object(i.jsxs)("div",{className:A.a.itemName,children:[Object(i.jsx)(R.a,{icon:F.g}),e.place.name]}),Object(i.jsxs)("div",{className:A.a.ratings,children:[Object(i.jsx)("div",{className:A.a["empty-stars"]}),Object(i.jsx)("div",{className:A.a["full-stars"],style:{width:y(e.place.star_level)}})]}),Object(i.jsxs)("div",{children:[Object(i.jsxs)("div",{className:A.a.itemTitle,children:[Object(i.jsx)(R.a,{icon:F.m}),"\u5730\u9ede"]}),Object(i.jsx)("div",{className:A.a.itemComment,children:e.place.address})]}),Object(i.jsxs)("div",{children:[Object(i.jsxs)("div",{className:A.a.itemTitle,children:[Object(i.jsx)(R.a,{icon:F.n}),"\u96fb\u8a71"]}),Object(i.jsx)("div",{className:A.a.itemComment,children:e.place.telephone})]}),Object(i.jsxs)("div",{className:A.a.itemOpenTime,children:[Object(i.jsxs)("div",{className:A.a.itemTitle,children:[Object(i.jsx)(R.a,{icon:F.c}),"\u71df\u696d\u6642\u9593"]}),Object(i.jsx)("div",{className:A.a.itemComment,children:e.place.open_time})]})]})]})},Y=s.a.memo(z),G={API_KEY:"AIzaSyB3k7sX8JtuhiokD-xfe9UgOIltB4HtkrM"},H=a(60),W=a(77),K=Object(W.compose)(Object(W.withProps)({googleMapURL:"https://maps.googleapis.com/maps/api/js?key=".concat(G.API_KEY,"&v=3.exp&libraries=geometry,drawing,places"),loadingElement:Object(i.jsx)("div",{style:{height:"100%"}}),containerElement:Object(i.jsx)("div",{style:{height:"100vh",width:"100%"}}),mapElement:Object(i.jsx)("div",{style:{height:"100%"}})}),H.withScriptjs,H.withGoogleMap)((function(e){return Object(i.jsx)(n.Fragment,{children:Object(i.jsx)(H.GoogleMap,{center:e.center,zoom:e.zoom,children:e.locationDetail.map((function(t,a){return Object(i.jsx)(H.Marker,{position:t.pos,onClick:function(i){return e.markerClickHandler(i.target,t,Math.floor(a/3))},children:e.infoOpen&&e.selectedPlace.pos==t.pos&&Object(i.jsx)(H.InfoWindow,{onCloseClick:function(){return e.setInfoOpen(!1)},children:Object(i.jsx)("div",{children:Object(i.jsx)("h3",{children:e.selectedPlace.name})})})},t.id)}))})})})),X=s.a.memo(K),q=v.firestore(),J=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var i;return Object(o.a)(this,a),(i=t.call(this,e)).componentDidMount=function(){v.auth().onAuthStateChanged((function(e){e?(i.setState({userUid:e.uid}),L(e.uid).onSnapshot((function(t){void 0===t.data().like?N(e.uid):i.setState({likeList:t.data().like})}))):(document.getElementById("loading").style.display="none",i.props.history.push("/member"))})),I("location"),q.collection("country").doc(i.props.match.params.tags).collection("location").get().then((function(e){var t=[];e.forEach((function(e){t.push({name:e.data().name,country:e.data().Country,city:e.data().City,area:e.data().Area,photo:e.data().PointImgUrl,pos:{lat:parseFloat(e.data().latitude,10),lng:parseFloat(e.data().longitude,10)},latitude:parseFloat(e.data().latitude,10),longitude:parseFloat(e.data().longitude,10),address:e.data().address,open_time:e.data().open_time,telephone:e.data().telephone,star_level:e.data().star_level,travelPoint:e.data().TravelPoint_Be_Added_Count,url:e.data().url,id:parseInt(e.data().id)})})),i.setState({locationDetail:t})})),q.collection("indexCountry").get().then((function(e){var t,a,n;e.forEach((function(e){e.data().name===i.props.match.params.tags&&(t={name:e.data().name,description:e.data().description,photo:e.data().photo,latitude:parseFloat(e.data().latitude,10),longitude:parseFloat(e.data().longitude,10),zoom_level:parseFloat(e.data().zoom_level,10)},a={lat:parseFloat(e.data().latitude),lng:parseFloat(e.data().longitude)},n=parseFloat(e.data().zoom_level))})),i.setState({locationBanner:t,center:a,zoom:n}),document.getElementById("loading").style.display="none"}))},i.handleInfoOpen=function(e){e&&i.setState({infoOpen:!1}),i.setState({infoOpen:!0})},i.handleOnChange=function(e){i.state.locationDetail.map((function(t,a){e.value===t.name&&i.setState({selectedPlace:t,center:t.pos,detailCardNum:Math.floor(a/3)+1})})),i.handleInfoOpen(i.state.infoOpen),i.state.zoom<13&&i.setState({zoom:13}),D("show")},i.markerClickHandler=function(e,t,a){"path"!==e&&(i.setState({selectedPlace:t,detailCardNum:a+1,center:t.pos}),i.handleInfoOpen(i.state.infoOpen),i.state.zoom<13&&i.setState({zoom:13}),D("show"))},i.setInfoOpen=function(e){i.setState({infoOpen:e})},i.state={locationBanner:[],locationDetail:[],center:{},zoom:15,selectedPlace:{},infoOpen:!1,likeList:[],userUid:"",detailCardNum:!1},i}return Object(r.a)(a,[{key:"shouldComponentUpdate",value:function(e){return e.match===this.props.match}},{key:"render",value:function(){var e=this,t=this.state.locationDetail.map((function(t,a){return Object(i.jsx)(M,{item:t,i:a,userId:e.state.userUid,likeList:e.state.likeList,markerClickHandler:function(i){e.markerClickHandler(i,t,Math.floor(a/3))}},a)}));return this.state.detailCardNum&&t.splice(3*this.state.detailCardNum,0,Object(i.jsx)(Y,{place:this.state.selectedPlace})),Object(i.jsxs)("div",{className:A.a.locationAll,children:[Object(i.jsxs)("div",{className:A.a.left,children:[Object(i.jsx)("div",{className:A.a.title,children:"\u6311\u9078\u666f\u9ede"}),Object(i.jsx)(h.a,{className:A.a.locationInput,loadOptions:function(t){return function(e,t){return S.apply(this,arguments)}(t,e.props.match.params.tags)},onChange:this.handleOnChange,placeholder:Object(i.jsx)("div",{children:"\u8f38\u5165\u60f3\u53bb\u7684\u666f\u9ede"})}),Object(i.jsxs)("div",{className:A.a.banner,children:[Object(i.jsx)("div",{className:A.a.bannerName,children:this.state.locationBanner.name}),Object(i.jsx)("div",{className:A.a.bannerDes,children:this.state.locationBanner.description}),Object(i.jsx)("img",{className:A.a.bannerPhoto,src:this.state.locationBanner.photo})]}),Object(i.jsx)("div",{className:A.a.location,children:Object(i.jsx)("div",{className:A.a.locationShow,children:t})})]}),Object(i.jsx)("div",{className:A.a.right,children:Object(i.jsx)(X,{locationDetail:this.state.locationDetail,locationBanner:this.state.locationBanner,center:this.state.center,zoom:this.state.zoom,selectedPlace:this.state.selectedPlace,infoOpen:this.state.infoOpen,markerClickHandler:this.markerClickHandler,setInfoOpen:this.setInfoOpen})})]})}}]),a}(s.a.Component),V=a(4),Q=a.n(V),Z=(a(539),a(323)),$=(a(649),a(13)),ee=a.n($),te=a(129),ae=v.firestore(),ie=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var i;return Object(o.a)(this,a),(i=t.call(this,e)).handleChange=function(e){i.setState({value:e.target.value})},i.handleSubmit=function(e){var t,a,n=Date.now();e.preventDefault(),(t=i.props.userUid,a=i.state.size,O.collection("schedule").doc(t).collection("data").doc("travel"+a)).set({CoverImgUrl:"https://imgs.gvm.com.tw/upload/gallery/oimg26/26478_01.jpg",EndDate:i.state.endDateSubmit,EndDateStamp:i.state.endDateStamp,ImMultiEditMember:!1,ShareLink:"",StartDate:i.state.startDateSubmit,StartDateStamp:i.state.startDateStamp,TotalDay:i.state.totalDay,TravelScheduleDetailInfos:[],TravelScheduleName:i.state.value,comment:"",id:i.state.size,dateBlock:i.state.dateBlock,setDateStamp:n});for(var s=0;s<i.state.totalDay;s++)C(i.props.userUid,i.state.size,i.state.dateBlock[s],[]);i.setState({value:""}),i.props.handleSubmitChange()},i.onDatesChange=function(e){for(var t=e.startDate,a=e.endDate,n=ee()(t).format("MM/DD/YYYY"),s=ee()(a).format("MM/DD/YYYY"),c=ee()(s)-ee()(n),l=Math.floor(c/864e5)+1,o=ee()(t).valueOf(),r=ee()(a).valueOf(),d=[],u=o;u<r+1;u+=864e5)d.push(ee()(u).format("MM-DD-YYYY"));i.setState({startDate:t,startDateStamp:o,endDate:a,endDateStamp:r,startDateSubmit:n,endDateSubmit:s,totalDay:l,dateBlock:d})},i.onFocusChange=function(e){i.setState({focusedInput:e})},i.handleDate=function(e){i.setState({date:e})},i.myRef=s.a.createRef(),i.state={value:"",focusedInput:"",startDate:"",endDate:"",startDateStamp:null,endDateStamp:null,date:"",startDateSubmit:"",endDateSubmit:"",totalDay:"",size:null,dateBlock:[]},i}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;ae.collection("schedule").doc(this.props.userUid).collection("data").get().then((function(t){e.setState({size:t.size})})),te.a.timeline({loop:1}).add({targets:document.getElementById("line1"),opacity:[.5,1],scaleX:[0,1],easing:"easeInOutExpo",duration:700}).add({targets:document.getElementById("line2"),opacity:[.5,1],scaleX:[0,1],easing:"easeInOutExpo",duration:50}).add({targets:document.getElementById("line1"),duration:600,easing:"easeOutExpo",translateY:"-1em"}),te.a.timeline({loop:1}).add({targets:document.getElementById("line1"),opacity:[.5,1],scaleX:[0,1],easing:"easeInOutExpo",duration:700}).add({targets:document.getElementById("line2"),opacity:[.5,1],scaleX:[0,1],easing:"easeInOutExpo",duration:50}).add({targets:document.getElementById("line2"),duration:600,easing:"easeOutExpo",translateY:"1em"}),te.a.timeline({loop:1}).add({targets:document.getElementById("line1"),opacity:[.5,1],scaleX:[0,1],easing:"easeInOutExpo",duration:700}).add({targets:document.getElementById("line2"),opacity:[.5,1],scaleX:[0,1],easing:"easeInOutExpo",duration:50}).add({targets:"#ampersand",opacity:[0,1],scaleY:[.5,1],easing:"easeOutExpo",duration:600,offset:"-=600"}).add({targets:document.getElementById("lettersLeft"),opacity:[0,1],translateX:["0.5em",0],easing:"easeOutExpo",duration:600,offset:"-=300"}),te.a.timeline({loop:1}).add({targets:document.getElementById("line1"),opacity:[.5,1],scaleX:[0,1],easing:"easeInOutExpo",duration:700}).add({targets:document.getElementById("line2"),opacity:[.5,1],scaleX:[0,1],easing:"easeInOutExpo",duration:50}).add({targets:"#ampersand",opacity:[0,1],scaleY:[.5,1],easing:"easeOutExpo",duration:600,offset:"-=600"}).add({targets:document.getElementById("lettersRight"),opacity:[0,1],translateX:["-0.5em",0],easing:"easeOutExpo",duration:600,offset:"-=600"})}},{key:"render",value:function(){return Object(i.jsxs)("div",{className:Q.a.addSchedule,children:[Object(i.jsxs)("label",{className:Q.a.addScheduleLabel,children:[Object(i.jsx)("h2",{className:Q.a.ml5,children:Object(i.jsxs)("span",{className:Q.a.textWrapper,children:[Object(i.jsx)("span",{className:Q.a.line,id:"line1"}),Object(i.jsx)("p",{className:Q.a.lettersLeft,id:"lettersLeft",children:"Plan"}),Object(i.jsx)("p",{className:Q.a.ampersand,id:"ampersand",children:"&"}),Object(i.jsx)("p",{className:Q.a.lettersRight,id:"lettersRight",children:"Start"}),Object(i.jsx)("span",{className:Q.a.line,id:"line2"})]})}),Object(i.jsxs)("div",{className:Q.a.titleInput,children:[Object(i.jsx)(R.a,{icon:F.o}),Object(i.jsx)("input",{type:"text",value:this.state.value,placeholder:"\u8acb\u8f38\u5165\u65c5\u7a0b\u540d\u7a31",onChange:this.handleChange})]}),Object(i.jsxs)("div",{className:Q.a.dateInputAll,children:[Object(i.jsx)(R.a,{icon:F.e}),Object(i.jsx)(Z.DateRangePicker,{withPortal:!0,numberOfMonths:1,autoFocus:!0,showClearDates:!0,startDatePlaceholderText:"\u958b\u59cb\u65e5\u671f",endDatePlaceholderText:"\u7d50\u675f\u65e5\u671f",monthFormat:"YYYY[\u5e74]MM[\u6708]",phrases:{closeDatePicker:"\u95dc\u9589",clearDates:"\u6e05\u9664\u65e5\u671f"},onDatesChange:this.onDatesChange,onFocusChange:this.onFocusChange,focusedInput:this.state.focusedInput,startDate:this.state.startDate,endDate:this.state.endDate,onChange:this.handleDate,value:this.state.date})]}),Object(i.jsx)("div",{children:this.state.date})]}),Object(i.jsx)("div",{className:Q.a.wrapper,children:Object(i.jsx)("a",{className:Q.a.button,onClick:this.handleSubmit,children:"Submit!"})})]})}}]),a}(s.a.PureComponent),ne=a(29),se=a(71),ce=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var i;return Object(o.a)(this,a),(i=t.call(this,e)).findLike=function(){void 0!==i.props.likeList.find((function(e){return e.id===i.props.locationDetail.id}))?i.setState({likeState:"showRed"}):i.setState({likeState:"hide"})},i.handleLike=function(e){var t=Object(P.a)(i.props.likeList);if(0===t.length)t.push(e),w(i.props.userUid,t);else if(t.find((function(t){return t.id===e.id}))){i.setState({likeState:"showGray"});var a=t.filter((function(t){return t.id!==e.id}));w(i.props.userUid,a)}else i.setState({likeState:"showRed"}),t.push(e),w(i.props.userUid,t)},i.state={likeState:"hide"},i}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.findLike()}},{key:"componentDidUpdate",value:function(e){e.likeList!==this.props.likeList&&this.findLike()}},{key:"render",value:function(){var e=this;return Object(i.jsx)(se.b,{draggableId:"id-".concat(this.props.locationDetail.id),index:this.props.locationDetail.id,children:function(t){return Object(i.jsxs)("div",Object(ne.a)(Object(ne.a)(Object(ne.a)({id:e.props.locationDetail.id,className:Q.a.item},t.draggableProps),t.dragHandleProps),{},{ref:t.innerRef,onMouseOver:function(){e.props.likeList.find((function(t){return t.id===e.props.locationDetail.id}))?e.setState({likeState:"showRed"}):e.setState({likeState:"showGray"})},onMouseLeave:function(){e.props.likeList.find((function(t){return t.id===e.props.locationDetail.id}))||e.setState({likeState:"hide"})},children:[Object(i.jsx)("div",{id:"likeSearch-".concat(e.props.locationDetail.id),className:"hide"===e.state.likeState?Q.a.hideLike:"showRed"===e.state.likeState?Q.a.redLike:Q.a.grayLike,onClick:function(){return e.handleLike(e.props.locationDetail)},children:Object(i.jsxs)("svg",{id:"icon-heart",viewBox:"0 0 32 32",width:"30",height:"20",children:[Object(i.jsx)("title",{children:"heart"}),Object(i.jsx)("path",{d:"M29.306 4.768c-1.662-1.66-3.958-2.687-6.493-2.687s-4.831 1.027-6.493 2.687l-0.32 0.32-0.32-0.32c-1.662-1.664-3.96-2.694-6.498-2.694-5.072 0-9.183 4.112-9.183 9.183 0 2.534 1.026 4.828 2.686 6.49l11.363 11.373c0.499 0.496 1.187 0.803 1.947 0.803s1.448-0.307 1.947-0.803l11.353-11.36c1.671-1.66 2.705-3.96 2.705-6.501 0-2.536-1.030-4.832-2.695-6.491l-0-0z"})]})}),Object(i.jsx)("img",{src:e.props.locationDetail.photo,className:Q.a.itemPhoto}),Object(i.jsx)("div",{className:Q.a.itemName,children:e.props.locationDetail.name}),Object(i.jsxs)("div",{className:Q.a.ratings,children:[Object(i.jsx)("div",{className:Q.a["empty-stars"]}),Object(i.jsx)("div",{className:Q.a["full-stars"],style:{width:y(e.props.locationDetail.star_level)}})]})]}))}})}}]),a}(s.a.PureComponent),le=v.firestore(),oe=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var i;return Object(o.a)(this,a),(i=t.call(this,e)).loadOptions=function(){var e=Object(b.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){le.collection("country").doc(i.state.value).collection("location").orderBy("name").startAt(t).endAt(t+"\uf8ff").get().then((function(t){if(t.empty)return e([]);var a=[];return t.forEach((function(e){var t={value:e.id,label:e.data().name};a.push(t),i.setState({countryId:e.data().id})})),e(a)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.handleOnChangeCountry=function(e){i.props.getCountry(e.label),i.setState({value:e.label}),k(e.label).then((function(e){var t=[];e.forEach((function(e){t.push({name:e.data().name,country:e.data().Country,photo:e.data().PointImgUrl,pos:{lat:parseFloat(e.data().latitude,10),lng:parseFloat(e.data().longitude,10)},star_level:e.data().star_level,id:parseInt(e.data().id)})})),i.setState({locationArray:t})}))},i.state={value:"",countryId:"",locationArray:[],likeList:[]},i.options=[{value:"\u53f0\u5317",label:"\u53f0\u5317"},{value:"\u5df4\u9ece",label:"\u5df4\u9ece"},{value:"\u6155\u5c3c\u9ed1",label:"\u6155\u5c3c\u9ed1"},{value:"\u65b0\u52a0\u5761",label:"\u65b0\u52a0\u5761"},{value:"\u6771\u4eac",label:"\u6771\u4eac"},{value:"\u7d10\u7d04",label:"\u7d10\u7d04"}],i}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;le.collection("schedule").doc(this.props.userUid).onSnapshot((function(t){void 0===t.data().like?N(e.props.userUid):e.setState({likeList:t.data().like})}))}},{key:"handleOnChange",value:function(e){document.getElementById(e).scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}},{key:"render",value:function(){var e=this;return Object(i.jsxs)("div",{children:[Object(i.jsxs)("div",{className:this.props.showLocationSearch?Q.a.searchAllShow:Q.a.searchAll,children:[Object(i.jsxs)("div",{children:[Object(i.jsx)("div",{className:Q.a.title,children:"\u6311\u9078\u570b\u5bb6"}),Object(i.jsx)(h.a,{className:Q.a.locationInput,loadOptions:g,onChange:function(t){return e.handleOnChangeCountry(t)},defaultOptions:this.options})]}),Object(i.jsxs)("div",{className:Q.a.locationSearchDetail,children:[Object(i.jsx)("div",{className:Q.a.title,children:"\u6311\u9078\u666f\u9ede"}),Object(i.jsx)(h.a,{className:Q.a.locationInput,loadOptions:this.loadOptions,onChange:function(){return e.handleOnChange(e.state.countryId)}})]})]}),Object(i.jsx)("div",{className:this.props.showLocationSearch?Q.a.locationListShow:Q.a.locationList,children:this.state.locationArray.map((function(t,a){return Object(i.jsx)(ce,{locationDetail:t,userUid:e.props.userUid,likeList:e.state.likeList},a)}))})]})}}]),a}(s.a.PureComponent),re=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var i;return Object(o.a)(this,a),(i=t.call(this,e)).handleLike=function(e){var t=i.state.locationDetail.filter((function(t){return t.id!==e.id}));w(i.props.userUid,t)},i.state={locationDetail:[]},i}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;L(this.props.userUid).onSnapshot((function(t){0!==t.data().like.length?e.setState({locationDetail:t.data().like}):e.setState({locationDetail:[]})}))}},{key:"render",value:function(){var e=this;return Object(i.jsx)("div",{className:this.props.showLocationSearch?Q.a.likeListShow:Q.a.likeList,children:this.state.locationDetail.map((function(t,a){return Object(i.jsx)(se.b,{draggableId:"Ld-".concat(t.id),index:a,children:function(a){return Object(i.jsxs)("div",Object(ne.a)(Object(ne.a)(Object(ne.a)({id:10*t.id,className:Q.a.item},a.draggableProps),a.dragHandleProps),{},{ref:a.innerRef,children:[Object(i.jsx)("div",{id:"like-".concat(t.id),className:Q.a.itemLike,onClick:function(){return e.handleLike(t)},children:Object(i.jsxs)("svg",{id:"icon-heart",viewBox:"0 0 32 32",width:"30",height:"20",children:[Object(i.jsx)("title",{children:"heart"}),Object(i.jsx)("path",{d:"M29.306 4.768c-1.662-1.66-3.958-2.687-6.493-2.687s-4.831 1.027-6.493 2.687l-0.32 0.32-0.32-0.32c-1.662-1.664-3.96-2.694-6.498-2.694-5.072 0-9.183 4.112-9.183 9.183 0 2.534 1.026 4.828 2.686 6.49l11.363 11.373c0.499 0.496 1.187 0.803 1.947 0.803s1.448-0.307 1.947-0.803l11.353-11.36c1.671-1.66 2.705-3.96 2.705-6.501 0-2.536-1.030-4.832-2.695-6.491l-0-0z"})]})}),Object(i.jsx)("img",{src:t.photo,className:Q.a.itemPhoto}),Object(i.jsx)("div",{className:Q.a.itemName,children:t.name}),Object(i.jsxs)("div",{className:Q.a.ratings,children:[Object(i.jsx)("div",{className:Q.a["empty-stars"]}),Object(i.jsx)("div",{className:Q.a["full-stars"],style:{width:y(t.star_level)}})]})]}))}},a)}))})}}]),a}(s.a.PureComponent),de=a(324),ue=[{value:"DRIVING",label:Object(i.jsx)(R.a,{icon:F.f,title:"DRIVING"})},{value:"WALKING",label:Object(i.jsx)(R.a,{icon:F.u,title:"WALKING"})},{value:"TRANSIT",label:Object(i.jsx)(R.a,{icon:F.q,title:"TRANSIT"})},{value:"BICYCLING",label:Object(i.jsx)(R.a,{icon:F.b,title:"BICYCLING"})}],he=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).filterSelectedData=function(e){var t=Object.assign({},this.props.trafficDetail);t[this.props.date][this.props.num].travelMode=e.value,this.props.handleTraffic(t)},e.handleTrafficMethod=function(){if(void 0!==e.props.trafficDetail[e.props.date][e.props.num])return ue.find((function(t){return t.value===e.props.trafficDetail[e.props.date][e.props.num].travelMode}))},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this;return void 0!==this.props.traffic[this.props.date][this.props.num]&&Object(i.jsxs)("div",{className:this.props.dragging?Q.a.trafficLengthHide:Q.a.trafficLength,children:[this.props.traffic[this.props.date][this.props.num].routes[0].legs[0].distance.text,Object(i.jsx)("br",{}),Object(i.jsxs)("div",{className:this.props.dragging?Q.a.itemTrafficHide:Q.a.itemTraffic,children:[Object(i.jsx)(de.a,{value:this.handleTrafficMethod(),onChange:function(t){return e.filterSelectedData(t)},options:ue,className:Q.a.itemSelect}),this.props.traffic[this.props.date][this.props.num].routes[0].legs[0].duration.text]})]})}}]),a}(s.a.Component),pe=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){var e=this;return Object(i.jsxs)("div",{children:[this.props.travelDetailCountry[this.props.date]&&0===this.props.travelDetailCountry[this.props.date].length&&Object(i.jsx)("div",{className:this.props.dragging?Q.a.emptyListHide:Q.a.emptyList,children:"Drop Here!"}),this.props.travelDetailCountry[this.props.date].map((function(t,a){return Object(i.jsxs)("div",{children:[Object(i.jsx)(se.b,{draggableId:"Id-".concat(t.id),index:a,children:function(n){return Object(i.jsxs)("div",Object(ne.a)(Object(ne.a)(Object(ne.a)({},n.draggableProps),n.dragHandleProps),{},{ref:n.innerRef,className:Q.a.itemList,onMouseOver:function(){return document.getElementById("delete-".concat(t.id)).style.display="block"},onMouseLeave:function(){return document.getElementById("delete-".concat(t.id)).style.display="none"},onClick:function(){e.props.setInfoOpen(!0),e.props.setSelectedPlace(t)},children:[Object(i.jsx)("div",{className:Q.a.itemListDelete,id:"delete-".concat(t.id),onClick:function(){e.props.handleDeleteLocation(a,e.props.date)},children:Object(i.jsx)(R.a,{icon:F.v})}),Object(i.jsx)("img",{src:t.photo,className:Q.a.itemPhoto}),Object(i.jsx)("div",{className:Q.a.itemName,children:t.name}),Object(i.jsxs)("div",{className:Q.a.ratings,children:[Object(i.jsx)("div",{className:Q.a["empty-stars"]}),Object(i.jsx)("div",{className:Q.a["full-stars"],style:{width:y(t.star_level)}})]})]}))}}),void 0!==e.props.traffic[e.props.date]&&a<e.props.traffic[e.props.date].length&&Object(i.jsx)(he,{traffic:e.props.traffic,date:e.props.date,num:a,handleTraffic:e.props.handleTraffic,trafficDetail:e.props.trafficDetail,dragging:e.props.dragging})]},t.id)}))]})}}]),a}(s.a.Component),me=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).handleDateScroll=function(e){document.getElementById("day".concat(e+1)).scrollIntoView({behavior:"smooth"})},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this;return Object(i.jsxs)("div",{className:Q.a.scheduleDateAll,children:[Object(i.jsxs)("div",{className:Q.a.scheduleDateSelect,children:[Object(i.jsx)(R.a,{icon:F.d}),Object(i.jsx)("div",{className:Q.a.scheduleDateTitle,children:"Day "}),Object.keys(this.props.travelDetailCountry).map((function(t,a){return Object(i.jsx)("div",{className:Q.a.scheduleDateDetail,onClick:function(){e.handleDateScroll(a)},children:a+1},a)}))]}),Object.keys(this.props.travelDetailCountry).map((function(t,a){return Object(i.jsx)(se.c,{droppableId:"drop-".concat(t),children:function(n){return Object(i.jsxs)("div",{className:Q.a.scheduleDetailForDrop,children:[Object(i.jsxs)("div",{className:Q.a.scheduleDateOnly,id:"day".concat(a+1),children:["\xa0\xa0\xa0\xa0","Day-",a+1," ","\xa0\xa0\xa0\xa0"," ",t]}),Object(i.jsxs)("div",Object(ne.a)(Object(ne.a)({className:Q.a.scheduleDetail,ref:n.innerRef},n.droppableProps),{},{children:[Object(i.jsx)(pe,{date:t,travelDetailCountry:e.props.travelDetailCountry,setInfoOpen:e.props.setInfoOpen,selectedPlace:e.props.selectedPlace,setSelectedPlace:e.props.setSelectedPlace,traffic:e.props.traffic,handleTraffic:e.props.handleTraffic,trafficDetail:e.props.trafficDetail,userUid:e.props.userUid,handleDeleteLocation:e.props.handleDeleteLocation,dragging:e.props.dragging}),n.placeholder]}))]})}},a)})),Object(i.jsx)(se.c,{droppableId:"locationList",children:function(t){return Object(i.jsxs)("div",Object(ne.a)(Object(ne.a)({className:e.props.showLocationSearch?Q.a.locationSectionShow:Q.a.locationSection,ref:t.innerRef},t.droppableProps),{},{children:[Object(i.jsx)("div",{className:e.props.switchToLocationSearchShow?Q.a.listShow:Q.a.displayNone,children:Object(i.jsx)(oe,{getCountry:e.props.getCountry,userUid:e.props.userUid,showLocationSearch:e.props.showLocationSearch})}),Object(i.jsx)("div",{className:e.props.switchToLocationSearchShow?Q.a.displayNone:Q.a.listShow,children:Object(i.jsx)(re,{userUid:e.props.userUid,showLocationSearch:e.props.showLocationSearch})})]}))}})]})}}]),a}(s.a.Component),je=a(652).MarkerWithLabel,_e=v.firestore(),be=Object(W.compose)(Object(W.withProps)({googleMapURL:"https://maps.googleapis.com/maps/api/js?key=".concat(G.API_KEY,"&v=3.exp&libraries=geometry,drawing,places"),loadingElement:Object(i.jsx)("div",{style:{height:"100%"}}),containerElement:Object(i.jsx)("div",{style:{height:"100vh",width:"100%"}}),mapElement:Object(i.jsx)("div",{style:{height:"100%"}})}),H.withScriptjs,H.withGoogleMap,Object(W.lifecycle)({componentDidUpdate:function(e){var t=this,a={},i=[],n=!1;if(e.trafficDetail!==this.props.trafficDetail){var s=new window.google.maps.DirectionsService;Object.keys(this.props.trafficDetail).forEach((function(e){var c=[];0!==t.props.trafficDetail[e].length&&(n=!0,t.props.trafficDetail[e].forEach((function(n,l){s.route({origin:n.origin,destination:n.destination,travelMode:window.google.maps.TravelMode[n.travelMode]},(function(n,s){s===window.google.maps.DirectionsStatus.OK?(c[l]=n,a[e]=c,t.props.showTraffic(a),i.push(n),t.setState({directions:i})):console.error("error fetching directions ".concat(n))}))})))})),!1===n&&this.props.showTraffic({})}}}))((function(e){var t=Object(n.useState)({}),a=Object(T.a)(t,2),s=a[0],c=a[1],l=Object(n.useState)([]),o=Object(T.a)(l,2),r=o[0],d=o[1];Object(n.useEffect)((function(){if(!Object.keys(e.travelDetailCountry).some((function(t){return 0!==e.travelDetailCountry[t].length&&(_e.collection("indexCountry").doc(e.travelDetailCountry[t][0].country).get().then((function(e){var t={};t.lat=parseFloat(e.data().latitude),t.lng=parseFloat(e.data().longitude),c(t)})),!0)}))){c({lat:25.049,lng:121.51557})}for(var t=[],a=Object.keys(e.travelDetailCountry).length,i=0;i<a;i++){var n="hsl("+360*Math.random()+","+(25+70*Math.random())+"%,"+(80+15*Math.random())+"%)";t.push(n)}d(t)}),[e.travelDetailCountry]);return Object(i.jsxs)(H.GoogleMap,{defaultZoom:11,center:s,children:[Object.keys(e.travelDetailCountry).map((function(t,a){return e.travelDetailCountry[t].map((function(t,n){return Object(i.jsxs)("div",{children:[Object(i.jsx)(je,{position:t.pos,labelAnchor:new window.google.maps.Point(13,42),labelStyle:{backgroundColor:"".concat(r[a]),borderRadius:"99em",border:"2px dotted black",fontSize:"12px",fontWeight:"bold",width:"25px",height:"25px",textAlign:"center",verticalAlign:"bottom"},onClick:function(){e.setSelectedPlaceMarker(t),e.setInfoOpen(!0)},children:Object(i.jsx)("div",{className:Q.a.markerText,children:n+1})}),Object(i.jsx)(H.Marker,{position:t.pos,children:e.infoOpen&&e.selectedPlace.pos.lat==t.pos.lat&&e.selectedPlace.pos.lng==t.pos.lng&&Object(i.jsx)(H.InfoWindow,{onCloseClick:function(){return e.setInfoOpen(!1)},children:Object(i.jsx)("div",{children:Object(i.jsx)("h3",{children:e.selectedPlace.name})})})})]},t.id)}))})),e.directions&&e.directions.map((function(e,t){return Object(i.jsx)(H.DirectionsRenderer,{directions:e,defaultOptions:{suppressMarkers:!0}},t)}))]})})),fe=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var i;return Object(o.a)(this,a),(i=t.call(this,e)).getCountry=function(e){i.setState({searchCountry:e})},i.onDragStart=function(e){i.setState({dragging:!0,repeatDragCardId:""});var t,a=e.draggableId,n=a.substr(0,1),s=a.substring(3);Object.keys(i.state.travelDetailCountry).forEach((function(e){0!==i.state.travelDetailCountry[e].length&&i.state.travelDetailCountry[e].forEach((function(e){e.id===a.substr(3)&&i.setState({repeatDragCardId:e.id})}))})),"i"===n&&k(i.state.searchCountry).then((function(e){e.forEach((function(e){if(e.data().id===s){var t={country:i.state.searchCountry,name:e.data().name,id:e.data().id,photo:e.data().PointImgUrl,star_level:e.data().star_level,pos:{lat:parseFloat(e.data().latitude),lng:parseFloat(e.data().longitude)}};i.setState({searchCountryDetail:t})}}))})),"L"===n&&(t=i.state.userUid,O.collection("schedule").doc(t).get()).then((function(e){var t={};e.data().like.forEach((function(e){e.id.toString()===s&&((t=e).id=e.id.toString(),i.setState({locationLikeDetail:t}))}))}))},i.onDragEnd=function(e){i.setState({dragging:!1});var t=e.destination,a=e.source,n=e.draggableId.substr(0,1),s=a.droppableId.substring(5),c=null;if(t&&(c=t.droppableId.substring(5),t.droppableId!==a.droppableId||t.index!==a.index)){if("I"===n)if(t.droppableId===a.droppableId&&t.index!==a.index){var l=[],o=(l=Array.from(i.state.travelDetailCountry[s])).splice(a.index,1),r=Object(T.a)(o,1)[0];l.splice(t.index,0,r);var d=Object(ne.a)({},i.state.travelDetailCountry);d[c]=l,i.setState({travelDetailCountry:d}),C(i.state.userUid,i.state.travelShowId,c,l)}else{var u=[],h=[];u=Array.from(i.state.travelDetailCountry[s]),h=Array.from(i.state.travelDetailCountry[c]);var p=u.splice(a.index,1),m=Object(T.a)(p,1)[0];h.splice(t.index,0,m);var j=Object(ne.a)({},i.state.travelDetailCountry);j[s]=u,j[c]=h,i.setState({travelDetailCountry:j}),C(i.state.userUid,i.state.travelShowId,s,u),C(i.state.userUid,i.state.travelShowId,c,h)}if("i"===n||"L"===n){var _=[];if(""!==i.state.repeatDragCardId)return document.getElementById("alert").style.display="flex",void window.setTimeout((function(){return document.getElementById("alert").style.display="none"}),1500);_=Array.from(i.state.travelDetailCountry[c]),"i"===n?_.splice(t.index,0,i.state.searchCountryDetail):_.splice(t.index,0,i.state.locationLikeDetail);var b=Object(ne.a)({},i.state.travelDetailCountry);b[c]=_,i.setState({travelDetailCountry:b}),C(i.state.userUid,i.state.travelShowId,c,_)}}},i.handleLocationShow=function(e){i.setState({switchToLocationSearchShow:e})},i.setInfoOpen=function(e){i.setState({infoOpen:e})},i.setSelectedPlaceMarker=function(e){var t={};t.pos={lat:e.pos.lat,lng:e.pos.lng},t.name=e.name,i.setState({selectedPlace:t})},i.showTraffic=function(e){i.setState({traffic:e})},i.handleTraffic=function(e){i.setState({trafficDetail:e})},i.handleDeleteLocation=function(e,t){if(void 0!==i.state.travelDetailCountry[t]){var a=Object(ne.a)({},i.state.travelDetailCountry),n=Object(P.a)(a[t]);n.splice(e,1),a[t]=n,i.setState({travelDetailCountry:a}),C(i.state.userUid,i.state.travelShowId,t,n)}if(e===i.state.travelDetailCountry[t].length-1){var s=Object.assign({},i.state.trafficDetail);s[t].splice(e-1,1),i.handleTraffic(s)}},i.handleShowLocationDrag=function(){!1===i.state.showLocationSearch?i.setState({showLocationSearch:!0}):i.setState({showLocationSearch:!1})},i.state={titleData:{},travelShowId:null,searchCountry:"",searchCountryDetail:{},locationLikeDetail:{},infoOpen:!1,selectedPlace:{},traffic:{},trafficDetail:{},userUid:"",showLocationSearch:!1,switchToLocationSearchShow:!0,travelDetailCountry:{},dragging:!1,repeatDragCardId:""},i}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=window.location.pathname.substring(23);this.setState({travelShowId:t}),document.getElementById("scheduleListRange").style.display="none",v.auth().onAuthStateChanged((function(a){a?e.setState({userUid:a.uid}):e.props.history.push("/member");var i,n,s={};(i=a.uid,n=t,O.collection("schedule").doc(i).collection("data").doc("travel".concat(n)).get()).then((function(t){s=Object(ne.a)({},t.data()),e.setState({titleData:s})}));var c={};(function(e,t){return O.collection("schedule").doc(e).collection("data").doc("travel".concat(t)).collection("dateBlockDetail").get()})(a.uid,t).then((function(t){t.forEach((function(e){c[e.data().name]=e.data().morning})),e.setState({travelDetailCountry:c}),document.getElementById("loading").style.display="none"}))}))}},{key:"componentDidUpdate",value:function(e,t){var a=this;if(t.travelDetailCountry!==this.state.travelDetailCountry){var i=new Object;Object.keys(this.state.travelDetailCountry).forEach((function(e){var t=[];if(a.state.travelDetailCountry[e].length>1)for(var n=a.state.travelDetailCountry[e],s=0;s<n.length-1;s++){var c={};c.origin=new window.google.maps.LatLng(n[s].pos.lat,n[s].pos.lng),c.destination=new window.google.maps.LatLng(n[s+1].pos.lat,n[s+1].pos.lng),c.travelMode="DRIVING",c.id=s,t.push(c)}i[e]=t})),this.setState({trafficDetail:i})}}},{key:"render",value:function(){var e=this,t=this.state.titleData;return Object(i.jsxs)("div",{className:Q.a.scheduleWithMap,children:[Object(i.jsxs)("div",{className:Q.a.schedule,children:[Object(i.jsxs)("div",{className:this.state.showLocationSearch?Q.a.switchBtnClick:Q.a.switchBtn,children:[Object(i.jsxs)("button",{onClick:function(){return e.handleLocationShow(!0)},className:this.state.switchToLocationSearchShow?Q.a.btnClick:Q.a.btn,children:[Object(i.jsx)("span",{children:"\u666f\u9ede\u641c\u5c0b"}),Object(i.jsx)("div",{className:"".concat(Q.a.triangle," ").concat(Q.a.t1)}),Object(i.jsx)("div",{className:"".concat(Q.a.triangle," ").concat(Q.a.t2)})]}),Object(i.jsxs)("button",{onClick:function(){return e.handleLocationShow(!1)},className:this.state.switchToLocationSearchShow?Q.a.btn:Q.a.btnClick,children:[Object(i.jsx)("span",{children:"\u6211\u7684\u6536\u85cf"}),Object(i.jsx)("div",{className:"".concat(Q.a.triangle," ").concat(Q.a.t1)}),Object(i.jsx)("div",{className:"".concat(Q.a.triangle," ").concat(Q.a.t2)})]})]}),Object(i.jsx)("div",{className:Q.a.scheduleListTopLeft,children:Object(i.jsxs)("div",{className:Q.a.scheduleListDetailTopLeft,children:[Object(i.jsx)("div",{className:this.state.showLocationSearch?Q.a.arrowBounce:Q.a.arrowBounceRotate,onClick:this.handleShowLocationDrag,children:Object(i.jsx)(R.a,{icon:F.a})}),Object(i.jsx)("img",{className:Q.a.schedulePhoto,src:t.CoverImgUrl}),Object(i.jsx)("div",{className:Q.a.scheduleTitle,children:t.TravelScheduleName}),Object(i.jsxs)("div",{className:Q.a.date,children:[t.StartDate," \uff5e"," ",Object(i.jsx)("span",{className:Q.a.date2,children:t.EndDate})]}),Object(i.jsx)("div",{className:Q.a.scheduleLayer})]})},t.id),Object(i.jsx)(se.a,{onDragEnd:this.onDragEnd,onDragStart:this.onDragStart,children:this.state.userUid&&Object(i.jsx)(me,{getCountry:this.getCountry,setInfoOpen:this.setInfoOpen,selectedPlace:this.state.selectedPlace,setSelectedPlace:this.setSelectedPlaceMarker,traffic:this.state.traffic,handleTraffic:this.handleTraffic,trafficDetail:this.state.trafficDetail,userUid:this.state.userUid,travelDetailCountry:this.state.travelDetailCountry,handleDeleteLocation:this.handleDeleteLocation,dragging:this.state.dragging,switchToLocationSearchShow:this.state.switchToLocationSearchShow,showLocationSearch:this.state.showLocationSearch})})]}),Object(i.jsx)("div",{className:Q.a.scheduleMap,children:Object(i.jsx)(be,{travelDetailCountry:this.state.travelDetailCountry,infoOpen:this.state.infoOpen,setInfoOpen:this.setInfoOpen,selectedPlace:this.state.selectedPlace,setSelectedPlaceMarker:this.setSelectedPlaceMarker,travelShowId:this.state.travelShowId,showTraffic:this.showTraffic,trafficDetail:this.state.trafficDetail,userUid:this.state.userUid})})]})}}]),a}(s.a.Component),ve=a(33),Oe=a(66),ge=v.firestore(),xe=function(){var e=Object(ve.h)(),t=e.path,a=e.url,s=Object(n.useState)([]),c=Object(T.a)(s,2),l=c[0],o=c[1],r=Object(n.useState)([]),d=Object(T.a)(r,2),u=d[0],h=d[1],p=Object(n.useState)(null),m=Object(T.a)(p,2),j=m[0],_=m[1],b=Object(n.useState)(!0),f=Object(T.a)(b,2),O=f[0],g=f[1],x=Object(n.useState)(""),S=Object(T.a)(x,2),y=S[0],D=S[1],N=Object(n.useState)(0),w=Object(T.a)(N,2),k=w[0],L=w[1],C=Object(ve.g)(),E=Object(ve.f)(),B=C.pathname.charAt(C.pathname.length-1),A=function(){g(!0)};return Object(n.useEffect)((function(){I("schedule"),v.auth().onAuthStateChanged((function(e){e?(D(e.uid),ge.collection("schedule").doc(e.uid).collection("data").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(e.data())})),o(t),h(t)}))):E.push("/member")}))}),[]),Object(i.jsxs)("div",{className:Q.a.scheduleLayout,children:[Object(i.jsxs)("div",{className:Q.a.scheduleListRange,id:"scheduleListRange",children:[Object(i.jsx)("div",{className:Q.a.scheduleNavMain,children:Object(i.jsxs)("ul",{className:Q.a.Nav,children:[Object(i.jsx)("li",{className:O?Q.a.liClick:Q.a.liUnclick,onClick:function(){!function(){var e=Object(P.a)(l);h(e),g(!0),_(null),L(0)}()},children:Object(i.jsx)(Oe.b,{to:"/schedule",children:"\u6240\u6709\u884c\u7a0b"})}),Object(i.jsx)("li",{className:O?Q.a.liUnclick:Q.a.liClick,onClick:function(){g(!1),_(null),L(0)},children:Object(i.jsx)(Oe.b,{to:"".concat(a,"/addSchedule"),children:"\u65b0\u589e\u884c\u7a0b"})})]})}),null===j&&"e"==B&&!0===O&&Object(i.jsxs)("div",{className:Q.a.scheduleListAll,children:[Object(i.jsx)("div",{className:Q.a.userList,children:Object(i.jsxs)("div",{className:Q.a.border,children:[Object(i.jsx)("a",{onClick:function(){var e=Object(P.a)(l),t=Date.now(),a=e.filter((function(e){return e.StartDateStamp<=t&&t<=e.EndDateStamp}));h(a),L(1)},className:1===k?Q.a.userListClick:Q.a.userListUnclick,children:"\u65c5\u884c\u4e2d"}),Object(i.jsx)("a",{onClick:function(){var e=Object(P.a)(l),t=Date.now(),a=e.filter((function(e){return e.StartDateStamp>=t}));h(a),L(2)},className:2===k?Q.a.userListClick:Q.a.userListUnclick,children:"\u5f85\u51fa\u767c"}),Object(i.jsx)("a",{onClick:function(){var e=Object(P.a)(l),t=Date.now(),a=e.filter((function(e){return e.EndDateStamp<=t}));h(a),L(3)},className:3===k?Q.a.userListClick:Q.a.userListUnclick,children:"\u56de\u61b6\u9304"})]})}),Object(i.jsx)("div",{className:Q.a.scheduleListDetail,children:u.slice(0).reverse().map((function(e){return Object(i.jsxs)("div",{id:e.id,className:Q.a.All,children:[Date.now()-e.setDateStamp<108e5&&Object(i.jsx)("div",{className:Q.a.tag,children:Object(i.jsx)("li",{children:"New"})}),Object(i.jsxs)("div",{className:Q.a.scheduleList,onClick:function(){_(e.id),document.getElementById("loading").style.display="flex",document.getElementById("loading").style.backgroundColor="white",E.push("".concat(a,"/editSchedule/").concat(e.id))},children:[Object(i.jsx)("div",{className:Q.a.scheduleTitle,children:e.TravelScheduleName}),Object(i.jsxs)("div",{className:Q.a.date,children:[Object(i.jsx)("div",{className:Q.a.travelDate,children:e.StartDate}),Object(i.jsx)(R.a,{icon:F.o}),Object(i.jsxs)("div",{className:Q.a.travelDate,children:[" ",e.EndDate]})]}),Object(i.jsx)("img",{className:Q.a.schedulePhoto,src:e.CoverImgUrl})]})]},e.id)}))})]}),!1===O&&Object(i.jsx)("div",{className:Q.a.scheduleListAdd,children:Object(i.jsx)(ve.a,{path:"".concat(t,"/addSchedule"),component:function(){return Object(i.jsx)(ie,{handleSubmitChange:A,userUid:y})}})})]}),Object(i.jsx)("div",{className:Q.a.scheduleAll,children:Object(i.jsx)(ve.a,{path:"".concat(t,"/editSchedule/:travelShow"),component:fe})})]})},Se=s.a.memo(xe),ye=a(17),De=a.n(ye),Ne=a.p+"static/media/google-icon-10.2eb52758.png",we=v.firestore(),ke=v.auth(),Le=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var i;return Object(o.a)(this,a),(i=t.call(this,e)).googleLogin=function(){var e=new v.auth.GoogleAuthProvider;v.auth().signInWithPopup(e).then((function(){var e=new Date;we.collection("schedule").doc(ke.currentUser.uid).set({displayName:i.state.displayName,createAt:e,email:ke.currentUser.email,userID:ke.currentUser.uid}).then(i.props.history.push("/profile"))})).catch((function(e){var t=e.message;i.setState({errorLoginState:t})}))},i.nativeSignUp=function(){v.auth().createUserWithEmailAndPassword(i.state.email,i.state.password).then((function(){ke.currentUser.updateProfile({displayName:i.state.displayName});var e=new Date;we.collection("schedule").doc(ke.currentUser.uid).set({displayName:i.state.displayName,createAt:e,email:ke.currentUser.email,userID:ke.currentUser.uid,photoURL:""}).then(i.props.history.push("/profile"))})).catch((function(e){var t=e.message;i.setState({errorSignupState:t})}))},i.nativeSignIn=function(){v.auth().signInWithEmailAndPassword(i.state.email,i.state.password).then((function(){i.props.history.push("/profile")})).catch((function(e){var t=e.message;i.setState({errorLoginState:t})}))},i.handleLoginChange=function(){i.state.loginState?i.setState({loginState:!1,email:"",password:""}):i.setState({loginState:!0,email:"user@gmail.com",password:"123456"})},i.handleNameChange=function(e){i.setState({displayName:e.target.value})},i.handleEmailChange=function(e){i.setState({email:e.target.value})},i.handlePasswordChange=function(e){i.setState({password:e.target.value})},i.state={loginState:!0,email:"user@gmail.com",password:"123456",displayName:"",errorLoginState:"",errorSignupState:""},i}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;v.auth().onAuthStateChanged((function(t){t&&e.props.history.push("/profile")})),I("member")}},{key:"render",value:function(){var e=this;return Object(i.jsx)("div",{className:De.a.member,children:Object(i.jsx)("div",{className:De.a.wrap,children:Object(i.jsxs)("div",{className:De.a.loginContainer,children:[Object(i.jsx)("div",{className:De.a.image,children:Object(i.jsx)("div",{className:De.a.layer})}),Object(i.jsxs)("div",{className:De.a.panel,children:[Object(i.jsxs)("div",{className:this.state.loginState?De.a.loginPanel:De.a.changeState,children:[Object(i.jsx)("div",{className:De.a.title,children:Object(i.jsxs)("h3",{children:[Object(i.jsx)(R.a,{icon:F.p}),"\u767b\u5165"]})}),Object(i.jsxs)("div",{className:De.a.container,children:[Object(i.jsx)("div",{className:De.a.signinTitle,children:Object(i.jsx)("p",{children:"\u767b\u5165\u5f8c\u53ef\u4f7f\u7528\u5b8c\u6574\u529f\u80fd"})}),Object(i.jsxs)("div",{className:De.a.signinItem,children:[Object(i.jsx)(R.a,{icon:F.h}),Object(i.jsx)("input",{type:"email",id:"sign-in-email",placeholder:"\u4fe1\u7bb1",onChange:function(t){return e.handleEmailChange(t)},value:this.state.email})]}),Object(i.jsxs)("div",{className:De.a.signinItem,children:[Object(i.jsx)(R.a,{icon:F.k}),Object(i.jsx)("input",{type:"password",id:"sign-in-email",placeholder:"\u5bc6\u78bc",onChange:function(t){return e.handlePasswordChange(t)},value:this.state.password})]}),Object(i.jsx)("div",{className:De.a.alert,children:this.state.errorLoginState}),Object(i.jsx)("button",{id:"signInBtn",className:De.a.btn,onClick:this.nativeSignIn,children:"\u767b\u5165"})]}),Object(i.jsxs)("div",{className:De.a.changeSingup,children:[Object(i.jsx)("p",{children:"\u9084\u4e0d\u662f\u6703\u54e1\u55ce\uff1f"}),Object(i.jsx)("button",{onClick:this.handleLoginChange,children:"\u7acb\u523b\u8a3b\u518a\u65b0\u5e33\u865f"})]}),Object(i.jsxs)("div",{className:De.a.divider,children:[Object(i.jsx)("span",{}),Object(i.jsx)("p",{children:"\u4f7f\u7528\u793e\u7fa4\u767b\u5165"}),Object(i.jsx)("span",{})]}),Object(i.jsxs)("div",{className:De.a.socialSignin,onClick:this.googleLogin,children:[Object(i.jsx)("img",{src:Ne,alt:"google-icon"}),Object(i.jsx)("p",{children:"Google \u767b\u5165"})]})]}),Object(i.jsxs)("div",{className:this.state.loginState?De.a.changeState:De.a.signupPanel,children:[Object(i.jsx)("div",{className:De.a.title,children:Object(i.jsxs)("h3",{children:[Object(i.jsx)(R.a,{icon:F.t}),"\u8a3b\u518a"]})}),Object(i.jsxs)("div",{className:De.a.container,children:[Object(i.jsxs)("div",{className:De.a.signinItem,children:[Object(i.jsx)(R.a,{icon:F.r}),Object(i.jsx)("input",{type:"text",id:"sign-up-name",placeholder:"\u59d3\u540d",onChange:function(t){return e.handleNameChange(t)},value:this.state.displayName})]}),Object(i.jsxs)("div",{className:De.a.signinItem,children:[Object(i.jsx)(R.a,{icon:F.h}),Object(i.jsx)("input",{type:"email",id:"sign-up-email",placeholder:"\u4fe1\u7bb1",onChange:function(t){return e.handleEmailChange(t)},value:this.state.email})]}),Object(i.jsxs)("div",{className:De.a.signinItem,children:[Object(i.jsx)(R.a,{icon:F.k}),Object(i.jsx)("input",{type:"password",id:"sign-up-password",placeholder:"\u5bc6\u78bc",onChange:function(t){return e.handlePasswordChange(t)},value:this.state.password})]}),Object(i.jsx)("div",{className:De.a.alert,children:this.state.errorSignupState}),Object(i.jsx)("button",{id:"signUpBtn",className:De.a.btn,onClick:this.nativeSignUp,children:"\u8a3b\u518a"})]}),Object(i.jsxs)("div",{className:De.a.changeSingup,children:[Object(i.jsx)("p",{children:"\u5df2\u7d93\u662f\u6703\u54e1\u55ce\uff1f"}),Object(i.jsx)("button",{onClick:this.handleLoginChange,children:"\u7acb\u523b\u767b\u5165"})]}),Object(i.jsxs)("div",{className:De.a.divider,children:[Object(i.jsx)("span",{}),Object(i.jsx)("p",{children:"\u4f7f\u7528\u793e\u7fa4\u767b\u5165"}),Object(i.jsx)("span",{})]}),Object(i.jsxs)("div",{className:De.a.socialSignin,onClick:this.googleLogin,children:[Object(i.jsx)("img",{src:Ne,alt:"google-icon"}),Object(i.jsx)("p",{children:"Google \u767b\u5165"})]})]})]})]})})})}}]),a}(s.a.PureComponent),Ce=a(20),Ie=a.n(Ce),Ee=v.firestore(),Pe=v.auth(),Te=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var i;return Object(o.a)(this,a),(i=t.call(this,e)).componentDidMount=function(){v.auth().onAuthStateChanged((function(e){if(e){var t="";""!==e.photoURL&&(t=e.photoURL),i.setState({name:Pe.currentUser.displayName,email:e.email,photoUrl:t,uid:e.uid});var a=[];Ee.collection("schedule").doc(e.uid).collection("data").get().then((function(e){e.forEach((function(e){var t={};t.StartDate=e.data().StartDate,t.EndDate=e.data().EndDate,t.CoverImgUrl=e.data().CoverImgUrl,t.TravelScheduleName=e.data().TravelScheduleName,t.StartDateStamp=e.data().StartDateStamp,t.EndDateStamp=e.data().EndDateStamp,t.id=e.data().id,a.push(t)}));var t=Date.now(),n=a.filter((function(e){return e.StartDateStamp<=t&&t<=e.EndDateStamp}));i.setState({schedule:a,scheduleShow:n})}))}else i.props.history.push("/member")})),I("profile");var e=document.querySelectorAll(".btn");e[0].classList.add(Ie.a.start),e.forEach((function(t,a){t.addEventListener("click",(function(){return function(t){e.forEach((function(e,a){t===a?e.classList.add(Ie.a.start):e.classList.remove(Ie.a.start)}))}(a)}))}))},i.signOut=function(){v.auth().signOut()},i.handleMiddle=function(){var e=Object(P.a)(i.state.schedule),t=Date.now(),a=e.filter((function(e){return e.StartDateStamp<=t&&t<=e.EndDateStamp}));i.setState({scheduleShow:a,title:"\u65c5\u884c\u4e2d"})},i.handlePrev=function(){var e=Object(P.a)(i.state.schedule),t=Date.now(),a=e.filter((function(e){return e.StartDateStamp>=t}));i.setState({scheduleShow:a,title:"\u5f85\u51fa\u767c"})},i.handlePast=function(){var e=Object(P.a)(i.state.schedule),t=Date.now(),a=e.filter((function(e){return e.EndDateStamp<=t}));i.setState({scheduleShow:a,title:"\u56de\u61b6\u9304"})},i.state={name:"",email:"",photoUrl:"",uid:"",schedule:[],scheduleShow:[],title:"\u65c5\u884c\u4e2d"},i}return Object(r.a)(a,[{key:"handleNavigate",value:function(e){document.getElementById("loading").style.display="flex",document.getElementById("loading").style.backgroundColor="white",this.props.history.push("/schedule/editSchedule/".concat(e))}},{key:"render",value:function(){var e=this;return Object(i.jsx)("div",{className:Ie.a.profile,children:Object(i.jsxs)("div",{className:Ie.a.wrap,children:[Object(i.jsx)("div",{className:Ie.a.profileLeft,children:Object(i.jsx)("div",{className:Ie.a.pad,children:Object(i.jsxs)("div",{className:Ie.a.user,children:[Object(i.jsxs)("div",{className:Ie.a.userImg,children:[null!==this.state.photoUrl&&Object(i.jsx)("img",{src:this.state.photoUrl,alt:"user photo"}),null===this.state.photoUrl&&Object(i.jsx)(R.a,{icon:F.r})]}),Object(i.jsx)("div",{className:Ie.a.userName,children:this.state.name}),Object(i.jsx)("div",{className:Ie.a.userEmail,children:this.state.email}),Object(i.jsxs)("div",{className:Ie.a.userList,children:[Object(i.jsxs)("ul",{children:[Object(i.jsx)("div",{className:Ie.a.buttons1,children:Object(i.jsxs)("button",{className:"btn",onClick:this.handleMiddle,children:[Object(i.jsx)("span",{}),Object(i.jsx)("p",{"data-title":"\u65c5\u884c\u4e2d"})]})}),Object(i.jsx)("div",{className:Ie.a.buttons2,children:Object(i.jsxs)("button",{className:"btn",onClick:this.handlePrev,children:[Object(i.jsx)("span",{}),Object(i.jsx)("p",{"data-title":"\u5f85\u51fa\u767c"})]})}),Object(i.jsx)("div",{className:Ie.a.buttons3,children:Object(i.jsxs)("button",{className:"btn",onClick:this.handlePast,children:[Object(i.jsx)("span",{}),Object(i.jsx)("p",{"data-title":"\u56de\u61b6\u9304"})]})})]}),Object(i.jsx)("div",{className:Ie.a.buttonsLogout,children:Object(i.jsxs)("button",{className:"btn",onClick:this.signOut,children:[Object(i.jsx)("span",{}),Object(i.jsx)("p",{"data-title":"\u767b\u51fa"})]})})]})]})})}),Object(i.jsxs)("div",{className:Ie.a.profileRight,children:[Object(i.jsx)("div",{className:Ie.a.listTitle,children:this.state.title}),Object(i.jsx)("div",{className:Ie.a.travelNumber,children:Object(i.jsxs)("div",{children:["\u76ee\u524d\u5171\u6709",Object(i.jsx)("span",{className:Ie.a.travelNum,children:this.state.scheduleShow.length}),"\u500b\u884c\u7a0b"]})}),Object(i.jsx)("div",{className:Ie.a.nowTravelList,children:this.state.scheduleShow.map((function(t,a){return Object(i.jsxs)("div",{className:Ie.a.nowTravelListDetail,onClick:function(){e.handleNavigate(t.id)},children:[Object(i.jsx)("div",{className:Ie.a.travelTitle,children:t.TravelScheduleName}),Object(i.jsxs)("div",{className:Ie.a.travelDateAll,children:[Object(i.jsx)("div",{className:Ie.a.travelDate,children:t.StartDate}),Object(i.jsx)(R.a,{icon:F.o}),Object(i.jsx)("div",{className:Ie.a.travelDate,children:t.EndDate})]}),Object(i.jsx)("img",{src:t.CoverImgUrl,alt:"tarvel cover image"})]},a)}))})]})]})})}}]),a}(s.a.PureComponent),Be=a(26),Ae=a.n(Be),Ue=a.p+"static/media/icon.cea8243b.png",Me=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var i;return Object(o.a)(this,a),(i=t.call(this,e)).handleScroll=function(){var e=window.scrollY;e>i.lastScrollTop?(i.lastScrollTop=e,i.setState({hidden:!0})):(i.lastScrollTop=e,i.setState({hidden:!1}))},i.handleShowEditNav=function(){"/schedule"===window.location.pathname.substring(0,9)&&window.location.replace("/schedule")},i.lastScrollTop=0,i.state={hidden:!1},i}return Object(r.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){return Object(i.jsxs)(Oe.a,{children:[Object(i.jsxs)("div",{className:Ae.a.loading,id:"loading",children:[Object(i.jsx)("div",{className:Ae.a.dot}),Object(i.jsx)("div",{className:Ae.a.dot}),Object(i.jsx)("div",{className:Ae.a.dot}),Object(i.jsx)("div",{className:Ae.a.dot}),Object(i.jsx)("div",{className:Ae.a.dot})]}),Object(i.jsxs)("div",{className:Ae.a.alert,id:"alert",children:[Object(i.jsx)(R.a,{icon:F.i}),Object(i.jsx)("div",{children:" \u7121\u6cd5\u62d6\u66f3\u91cd\u8907\u7684\u666f\u9ede\u5361\u7247\u54e6\uff01"})]}),Object(i.jsxs)("div",{className:Ae.a.app,children:[Object(i.jsx)("nav",{className:this.state.hidden?Ae.a.hide:Ae.a.active,children:Object(i.jsxs)("div",{className:Ae.a.flexWrap,children:[Object(i.jsxs)(Oe.b,{to:"/",className:Ae.a.icon,children:[Object(i.jsx)("img",{src:Ue,alt:"icon"}),Object(i.jsx)("div",{id:"MainTitle",children:"Travel Advisor"})]}),Object(i.jsxs)("nav",{className:Ae.a.menu,children:[Object(i.jsx)("input",{type:"checkbox",href:"#",className:Ae.a["menu-open"],name:"menu-open",id:"menu-open"}),Object(i.jsxs)("label",{className:Ae.a["menu-open-button"],htmlFor:"menu-open",children:[Object(i.jsx)("span",{className:"".concat(Ae.a.hamburger," ").concat(Ae.a["hamburger-1"])}),Object(i.jsx)("span",{className:"".concat(Ae.a.hamburger," ").concat(Ae.a["hamburger-2"])}),Object(i.jsx)("span",{className:"".concat(Ae.a.hamburger," ").concat(Ae.a["hamburger-3"])})]}),Object(i.jsx)(Oe.b,{to:"/member",className:Ae.a["menu-item"],"data-title":"\u6703\u54e1",children:Object(i.jsx)(R.a,{icon:F.s})}),Object(i.jsx)(Oe.b,{to:"/schedule",onClick:this.handleShowEditNav,className:Ae.a["menu-item"],"data-title":"\u884c\u7a0b",children:Object(i.jsx)(R.a,{icon:F.l})}),Object(i.jsx)(Oe.b,{to:"/",className:Ae.a["menu-item"],"data-title":"\u641c\u5c0b",children:Object(i.jsx)(R.a,{icon:F.j})})]}),Object(i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",children:Object(i.jsxs)("defs",{children:[Object(i.jsxs)("filter",{id:"shadowed-goo",children:[Object(i.jsx)("feGaussianBlur",{in:"SourceGraphic",result:"blur",stdDeviation:"10"}),Object(i.jsx)("feColorMatrix",{in:"blur",mode:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -7",result:"goo"}),Object(i.jsx)("feGaussianBlur",{in:"goo",stdDeviation:"3",result:"shadow"}),Object(i.jsx)("feColorMatrix",{in:"shadow",mode:"matrix",values:"0 0 0 0 0  0 0 0 0 0  0 0 0 0 0  0 0 0 1 -0.2",result:"shadow"}),Object(i.jsx)("feOffset",{in:"shadow",dx:"1",dy:"1",result:"shadow"}),Object(i.jsx)("feComposite",{in2:"shadow",in:"goo",result:"goo"}),Object(i.jsx)("feComposite",{in2:"goo",in:"SourceGraphic",result:"mix"})]}),Object(i.jsxs)("filter",{id:"goo",children:[Object(i.jsx)("feGaussianBlur",{in:"SourceGraphic",result:"blur",stdDeviation:"10"}),Object(i.jsx)("feColorMatrix",{in:"blur",mode:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -7",result:"goo"}),Object(i.jsx)("feComposite",{in2:"goo",in:"SourceGraphic",result:"mix"})]})]})})]})}),Object(i.jsxs)("div",{className:Ae.a.mobileNav,id:"mobileNav",children:[Object(i.jsxs)(Oe.b,{to:"/",id:"mobileNav1",children:[Object(i.jsx)(R.a,{icon:F.j}),"\u641c\u5c0b"]}),Object(i.jsxs)(Oe.b,{to:"/schedule",onClick:this.handleShowEditNav,id:"mobileNav2",children:[Object(i.jsx)(R.a,{icon:F.l}),"\u884c\u7a0b"]}),Object(i.jsxs)(Oe.b,{to:"/member",id:"mobileNav3",children:[Object(i.jsx)(R.a,{icon:F.s}),"\u6703\u54e1"]})]}),Object(i.jsxs)(ve.c,{children:[Object(i.jsx)(ve.a,{exact:!0,path:"/",component:E}),Object(i.jsx)(ve.a,{exact:!0,path:"/locationDetail/:tags",component:J}),Object(i.jsx)(ve.a,{path:"/schedule",component:Se}),Object(i.jsx)(ve.a,{path:"/member",component:Le}),Object(i.jsx)(ve.a,{path:"/profile",component:Te})]})]})]})}}]),a}(s.a.Component),Re=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,656)).then((function(t){var a=t.getCLS,i=t.getFID,n=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),i(e),n(e),s(e),c(e)}))};l.a.render(Object(i.jsx)(Me,{}),document.getElementById("root")),Re()}},[[655,1,2]]]);
//# sourceMappingURL=main.e1b4713f.chunk.js.map