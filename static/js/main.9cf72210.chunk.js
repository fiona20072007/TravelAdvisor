(this["webpackJsonptrip-advisor"]=this["webpackJsonptrip-advisor"]||[]).push([[0],{10:function(e,t,a){e.exports={locationAll:"locationDetail_locationAll__kgg_o",left:"locationDetail_left__3Jgxr",right:"locationDetail_right__2Lw4_",banner:"locationDetail_banner__2SVsJ",bannerName:"locationDetail_bannerName__vxWfW",bannerDes:"locationDetail_bannerDes__1fEgq",bannerPhoto:"locationDetail_bannerPhoto__3Jcyl",location:"locationDetail_location__1GpwA",locationShow:"locationDetail_locationShow__3rXhg",item:"locationDetail_item__2SzPu",itemSelect:"locationDetail_itemSelect__1dgtC",selectDetail:"locationDetail_selectDetail__2TP0K",itemPhoto:"locationDetail_itemPhoto__1F8oB",itemSelectPhoto:"locationDetail_itemSelectPhoto__1dAgU",marker:"locationDetail_marker__mIOvk"}},171:function(e,t,a){e.exports={app:"App_app__3S3eq"}},24:function(e,t,a){e.exports={locationAll:"location_locationAll__13MOP",banner:"location_banner__1ElCc",title:"location_title__1lAJx",locationInput:"location_locationInput__vGbK3",location:"location_location__3Y6Pt",locationShow:"location_locationShow__2QR3-",titleShow:"location_titleShow__2tfIc",item:"location_item__9Plxv",itemPhoto:"location_itemPhoto__3MzgM",itemName:"location_itemName__3BLUT",itemDescription:"location_itemDescription__3F-0A"}},395:function(e,t,a){"use strict";a.r(t);var n=a(3),o=a(2),i=a.n(o),c=a(32),l=a.n(c),s=a(28),r=a(29),d=a(31),h=a(30),u=a(50),p=a.n(u),m=a(78),j=a(81);j.a.initializeApp({apiKey:"AIzaSyAupP8pk0usCtzryMeCkskkn_1OuE1s2mg",authDomain:"tripadvisor-abc.firebaseapp.com",databaseURL:"https://tripadvisor-abc.firebaseio.com",projectId:"tripadvisor-abc",storageBucket:"tripadvisor-abc.appspot.com",messagingSenderId:"385058100845",appId:"1:385058100845:web:e14c078e62560948f99164",measurementId:"G-WJKPTNBC2F"}),j.a.firestore();var b=j.a,O=a(79),f=a(174),v=a(24),_=a.n(v),g=function(e){return Object(n.jsx)("div",{className:_.a.location,children:Object(n.jsx)("div",{className:_.a.locationShow,children:e.indexLocation.map((function(t){return Object(n.jsxs)("div",{className:_.a.item,onClick:function(){e.handleOnChange({value:t.name,label:t.name})},children:[Object(n.jsx)("div",{className:_.a.itemName,children:t.name}),Object(n.jsx)("div",{className:_.a.itemDescription,children:t.description}),Object(n.jsx)("img",{src:t.photo,alt:t.name,className:_.a.itemPhoto})]},Object(f.a)())}))})})},x=b.firestore(),S=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){x.collection("indexCountry").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push({name:e.data().name,description:e.data().description,photo:e.data().photo})})),n.setState({indexLocation:t})}))},n.loadOptions=function(){var e=Object(m.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=t.toLowerCase().replace(/\W/g,""),e.abrupt("return",new Promise((function(e){x.collection("Tag").orderBy("plainName").startAt(t).endAt(t+"\uf8ff").get().then((function(t){if(t.empty)return e([]);var a=[];return t.forEach((function(e){var t={value:e.id,label:e.data().tagName};a.push(t)})),e(a)}))})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleOnChange=function(e){console.log(e),n.props.history.push("/locationDetail/".concat(e.label))},n.state={selectedTag:[],indexLocation:[]},n}return Object(r.a)(a,[{key:"render",value:function(){return Object(n.jsxs)("div",{className:_.a.locationAll,children:[Object(n.jsx)("div",{className:_.a.banner}),Object(n.jsx)("div",{className:_.a.title,children:"\u6311\u9078\u5730\u9ede"}),Object(n.jsx)(O.a,{className:_.a.locationInput,loadOptions:this.loadOptions,onChange:this.handleOnChange}),Object(n.jsx)(g,{indexLocation:this.state.indexLocation,handleOnChange:this.handleOnChange})]})}}]),a}(i.a.Component),k=a(10),C=a.n(k),N=function(e){return Object(n.jsxs)("div",{className:C.a.location,children:[Object(n.jsx)("div",{className:C.a.titleShow,children:"\u641c\u5c0b\u7d50\u679c"}),Object(n.jsx)("div",{className:C.a.locationShow,children:e.locationDetail.map((function(t){return e.selectedPlace.id===t.id?Object(n.jsxs)("div",{id:t.id,onClick:function(a){return e.markerClickHandler(a,t)},className:C.a.itemSelect,children:[Object(n.jsx)("img",{src:t.photo,className:C.a.itemSelectPhoto}),Object(n.jsxs)("div",{className:C.a.selectDetail,children:[Object(n.jsx)("div",{className:C.a.itemName,children:t.name}),Object(n.jsx)("div",{children:t.address}),Object(n.jsx)("div",{children:t.telephone}),Object(n.jsx)("div",{children:t.star_level})]})]},t.id):Object(n.jsxs)("div",{id:t.id,onClick:function(a){return e.markerClickHandler(a,t)},className:C.a.item,children:[Object(n.jsx)("img",{src:t.photo,className:C.a.itemPhoto}),Object(n.jsx)("div",{className:C.a.itemName,children:t.name}),Object(n.jsx)("div",{children:t.star_level})]},t.id)}))})]})},D={API_KEY:"AIzaSyB3k7sX8JtuhiokD-xfe9UgOIltB4HtkrM"},P=a(52),y=a(58),w=Object(y.compose)(Object(y.withProps)({googleMapURL:"https://maps.googleapis.com/maps/api/js?key=".concat(D.API_KEY,"&v=3.exp&libraries=geometry,drawing,places"),loadingElement:Object(n.jsx)("div",{style:{height:"100%"}}),containerElement:Object(n.jsx)("div",{style:{height:"100vh",width:"100%"}}),mapElement:Object(n.jsx)("div",{style:{height:"100%"}})}),P.withScriptjs,P.withGoogleMap)((function(e){return Object(n.jsx)(o.Fragment,{children:Object(n.jsx)(P.GoogleMap,{center:e.center,zoom:e.zoom,children:e.locationDetail.map((function(t){return Object(n.jsx)(P.Marker,{position:t.pos,onClick:function(a){return e.markerClickHandler(a,t)},children:e.infoOpen&&e.selectedPlace.pos==t.pos&&Object(n.jsx)(P.InfoWindow,{onCloseClick:function(){return e.setInfoOpen(!1)},children:Object(n.jsx)("div",{children:Object(n.jsx)("h3",{children:e.selectedPlace.name})})})},t.id)}))})})})),I=b.firestore(),A=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){I.collection("country").doc(n.props.match.params.tags).collection("location").get().then((function(e){var t=[];e.forEach((function(e){t.push({name:e.data().name,country:e.data().Country,city:e.data().City,area:e.data().Area,photo:e.data().PointImgUrl,pos:{lat:parseFloat(e.data().latitude,10),lng:parseFloat(e.data().longitude,10)},latitude:parseFloat(e.data().latitude,10),longitude:parseFloat(e.data().longitude,10),address:e.data().address,open_time:e.data().open_time,telephone:e.data().telephone,star_level:e.data().star_level,travelPoint:e.data().TravelPoint_Be_Added_Count,url:e.data().url,id:parseInt(e.data().id)})})),n.setState({locationDetail:t})})),I.collection("indexCountry").get().then((function(e){var t,a,o;e.forEach((function(e){e.data().name===n.props.match.params.tags&&(t={name:e.data().name,description:e.data().description,photo:e.data().photo,latitude:parseFloat(e.data().latitude,10),longitude:parseFloat(e.data().longitude,10),zoom_level:parseFloat(e.data().zoom_level,10)},a={lat:parseFloat(e.data().latitude),lng:parseFloat(e.data().longitude)},o=parseFloat(e.data().zoom_level))})),n.setState({locationBanner:t,center:a,zoom:o})}))},n.loadOptions=function(){var e=Object(m.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=t.toLowerCase().replace(/\W/g,""),e.abrupt("return",new Promise((function(e){I.collection("country").doc(n.props.match.params.tags).collection("location").orderBy("plainName").startAt(t).endAt(t+"\uf8ff").get().then((function(t){if(t.empty)return e([]);var a=[];return t.forEach((function(e){var t={value:e.id,label:e.data().tagName};a.push(t)})),e(a)}))})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleOnChange=function(e){n.state.locationDetail.map((function(t){e.value===t.name&&(console.log(t),n.setState({selectedTag:[e],selectedPlace:t}),document.getElementById(t.id).scrollIntoView({behavior:"smooth",block:"center",inline:"center"}))})),n.state.infoOpen&&n.setState({infoOpen:!1}),n.setState({infoOpen:!0}),n.state.zoom<13&&n.setState({zoom:13})},n.markerClickHandler=function(e,t){n.setState({selectedPlace:t}),n.state.infoOpen&&n.setState({infoOpen:!1}),n.setState({infoOpen:!0}),n.state.zoom<13&&n.setState({zoom:13}),document.getElementById(t.id).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},n.setInfoOpen=function(e){n.setState({infoOpen:e})},n.state={selectedTag:[],locationBanner:[],locationDetail:[],center:{},zoom:15,selectedPlace:{},infoOpen:!1},n}return Object(r.a)(a,[{key:"render",value:function(){return Object(n.jsxs)("div",{className:C.a.locationAll,children:[Object(n.jsxs)("div",{className:C.a.left,children:[Object(n.jsx)("div",{className:C.a.title,children:"\u6311\u9078\u666f\u9ede"}),Object(n.jsx)(O.a,{className:C.a.locationInput,loadOptions:this.loadOptions,onChange:this.handleOnChange}),Object(n.jsxs)("div",{className:C.a.banner,children:[Object(n.jsx)("div",{className:C.a.bannerName,children:this.state.locationBanner.name}),Object(n.jsx)("div",{className:C.a.bannerDes,children:this.state.locationBanner.description}),Object(n.jsx)("img",{className:C.a.bannerPhoto,src:this.state.locationBanner.photo})]}),Object(n.jsx)(N,{locationDetail:this.state.locationDetail,selectedPlace:this.state.selectedPlace,markerClickHandler:this.markerClickHandler})]}),Object(n.jsx)("div",{className:C.a.right,children:Object(n.jsx)(w,{locationDetail:this.state.locationDetail,locationBanner:this.state.locationBanner,center:this.state.center,zoom:this.state.zoom,selectedPlace:this.state.selectedPlace,infoOpen:this.state.infoOpen,markerClickHandler:this.markerClickHandler,setInfoOpen:this.setInfoOpen})})]})}}]),a}(i.a.Component),B=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState({value:e.target.value})},n.handleSubmit=function(e){alert("A name was submitted: "+n.state.value),e.preventDefault(),n.setState({value:""})},n.state={value:""},n}return Object(r.a)(a,[{key:"render",value:function(){return Object(n.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(n.jsxs)("label",{children:["Please enter trip name:",Object(n.jsx)("input",{type:"text",value:this.state.value,onChange:this.handleChange})]}),Object(n.jsx)("input",{type:"submit",value:"Submit"})]})}}]),a}(i.a.Component),z=b.firestore(),F=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){z.collection("schedule").doc("userId").collection("data").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(e.data())})),n.setState({TravelSchedule:t})}))},n.state={TravelSchedule:[]},n}return Object(r.a)(a,[{key:"render",value:function(){return console.log(this.state.TravelSchedule),Object(n.jsx)("div",{children:Object(n.jsx)(B,{TravelSchedule:this.state.TravelSchedule})})}}]),a}(i.a.Component),E=a(171),T=a.n(E),L=a(172),M=a(9),H=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){return Object(n.jsx)(L.a,{children:Object(n.jsx)("div",{className:T.a.app,children:Object(n.jsxs)(M.c,{children:[Object(n.jsx)(M.a,{exact:!0,path:"/",component:S}),Object(n.jsx)(M.a,{exact:!0,path:"/locationDetail/:tags",component:A}),Object(n.jsx)(M.a,{exact:!0,path:"/schedule",component:F})]})})})}}]),a}(i.a.Component),J=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,396)).then((function(t){var a=t.getCLS,n=t.getFID,o=t.getFCP,i=t.getLCP,c=t.getTTFB;a(e),n(e),o(e),i(e),c(e)}))};l.a.render(Object(n.jsx)(H,{}),document.getElementById("root")),J()}},[[395,1,2]]]);
//# sourceMappingURL=main.9cf72210.chunk.js.map