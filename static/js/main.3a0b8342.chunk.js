(this["webpackJsonptrip-advisor"]=this["webpackJsonptrip-advisor"]||[]).push([[0],{13:function(e,t,a){e.exports={locationAll:"locationDetail_locationAll__kgg_o",right:"locationDetail_right__2Lw4_",left:"locationDetail_left__3Jgxr",banner:"locationDetail_banner__2SVsJ",bannerName:"locationDetail_bannerName__vxWfW",bannerDes:"locationDetail_bannerDes__1fEgq",bannerPhoto:"locationDetail_bannerPhoto__3Jcyl",navBar:"locationDetail_navBar__175yc",navBarList:"locationDetail_navBarList__3Q82A",title:"locationDetail_title__2JnI7",locationInput:"locationDetail_locationInput__3qElD",location:"locationDetail_location__1GpwA",locationShow:"locationDetail_locationShow__3rXhg",titleShow:"locationDetail_titleShow__2xlgb",item:"locationDetail_item__2SzPu",itemSelect:"locationDetail_itemSelect__1dgtC",selectDetail:"locationDetail_selectDetail__2TP0K",itemPhoto:"locationDetail_itemPhoto__1F8oB",itemSelectPhoto:"locationDetail_itemSelectPhoto__1dAgU",itemLike:"locationDetail_itemLike__2Y3te",marker:"locationDetail_marker__mIOvk",icon1:"locationDetail_icon1__12Vhw",open:"locationDetail_open__2reQU"}},158:function(e,t,a){e.exports={member:"member_member__36zxE"}},324:function(e,t,a){e.exports={app:"App_app__3S3eq"}},51:function(e,t,a){e.exports={locationAll:"location_locationAll__13MOP",navBar:"location_navBar__1H-il",navBarList:"location_navBarList__MGJmE",banner:"location_banner__1ElCc",title:"location_title__1lAJx",locationInput:"location_locationInput__vGbK3",location:"location_location__3Y6Pt",locationShow:"location_locationShow__2QR3-",titleShow:"location_titleShow__2tfIc",item:"location_item__9Plxv",itemPhoto:"location_itemPhoto__3MzgM",itemName:"location_itemName__3BLUT",itemDescription:"location_itemDescription__3F-0A"}},551:function(e,t){},655:function(e,t,a){"use strict";a.r(t);var n=a(3),i=a(1),o=a.n(i),c=a(19),l=a.n(c),s=a(20),r=a(21),d=a(23),u=a(22),h=a(64),p=a.n(h),m=a(87),f=a(159);a(332),a(333),a(334);f.a.initializeApp({apiKey:"AIzaSyAupP8pk0usCtzryMeCkskkn_1OuE1s2mg",authDomain:"tripadvisor-abc.firebaseapp.com",databaseURL:"https://tripadvisor-abc.firebaseio.com",projectId:"tripadvisor-abc",storageBucket:"tripadvisor-abc.appspot.com",messagingSenderId:"385058100845",appId:"1:385058100845:web:e14c078e62560948f99164",measurementId:"G-WJKPTNBC2F"}),f.a.firestore();var j=f.a,b=a(88),v=a(126),g=a(51),O=a.n(g),y=function(e){return Object(n.jsx)("div",{className:O.a.location,children:Object(n.jsx)("div",{className:O.a.locationShow,children:e.indexLocation.map((function(t){return Object(n.jsxs)("div",{className:O.a.item,onClick:function(){e.handleOnChange({value:t.name,label:t.name})},children:[Object(n.jsx)("div",{className:O.a.itemName,children:t.name}),Object(n.jsx)("div",{className:O.a.itemDescription,children:t.description}),Object(n.jsx)("img",{src:t.photo,alt:t.name,className:O.a.itemPhoto})]},Object(v.a)())}))})})},x=a(158),_=a.n(x),D=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).googleLogin=function(){var e=new j.auth.GoogleAuthProvider;j.auth().signInWithPopup(e).then((function(e){var t=e.credential.accessToken,a=e.user;console.log(t,a)})).catch((function(e){console.log(e)}))},e.googleSignOut=function(){j.auth().signOut().then((function(){console.log("signout success")})).catch((function(e){console.log(e)}))},e}return Object(r.a)(a,[{key:"render",value:function(){return Object(n.jsxs)("div",{className:_.a.member,children:[Object(n.jsx)("div",{className:_.a.banner}),Object(n.jsx)("div",{className:_.a.title,children:"\u6703\u54e1\u767b\u5165"}),Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{children:"\u5e33\u865f"}),Object(n.jsx)("input",{}),Object(n.jsx)("div",{children:"\u5bc6\u78bc"}),Object(n.jsx)("input",{})]}),Object(n.jsx)("button",{onClick:this.googleLogin,children:"Continue with Google"}),Object(n.jsx)("button",{onClick:this.googleSignOut,children:"Log Out"})]})}}]),a}(o.a.Component),k=a(59),S=j.firestore(),I=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){S.collection("indexCountry").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push({name:e.data().name,description:e.data().description,photo:e.data().photo})})),n.setState({indexLocation:t})}))},n.loadOptions=function(){var e=Object(m.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=t.toLowerCase().replace(/\W/g,""),e.abrupt("return",new Promise((function(e){S.collection("Tag").orderBy("plainName").startAt(t).endAt(t+"\uf8ff").get().then((function(t){if(t.empty)return e([]);var a=[];return t.forEach((function(e){var t={value:e.id,label:e.data().tagName};a.push(t)})),e(a)}))})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleOnChange=function(e){n.props.history.push("/locationDetail/".concat(e.label))},n.state={selectedTag:[],indexLocation:[],memberLoginState:!1},n}return Object(r.a)(a,[{key:"render",value:function(){var e=this;return Object(n.jsxs)("div",{className:O.a.locationAll,children:[Object(n.jsx)("div",{className:O.a.navBar,children:"\u4e09"}),Object(n.jsxs)("div",{className:O.a.navBarList,children:[Object(n.jsx)(k.b,{to:"/",children:"Home"}),Object(n.jsx)(k.b,{to:"/schedule",children:"\u884c\u7a0b\u898f\u5283"}),Object(n.jsx)("div",{onClick:function(){e.setState((function(e){return{memberLoginState:!e.memberLoginState}}))},children:"\u6703\u54e1\u767b\u5165"})]}),Object(n.jsx)("div",{className:O.a.banner}),Object(n.jsx)("div",{className:O.a.title,children:"\u6311\u9078\u5730\u9ede"}),Object(n.jsx)(b.a,{className:O.a.locationInput,loadOptions:this.loadOptions,onChange:this.handleOnChange}),Object(n.jsx)(y,{indexLocation:this.state.indexLocation,handleOnChange:this.handleOnChange}),!0===this.state.memberLoginState&&Object(n.jsx)(D,{})]})}}]),a}(o.a.Component),L=a(90),N=a(13),w=a.n(N),C=function(e){return Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{className:w.a.banner,children:[Object(n.jsx)("div",{className:w.a.bannerName,children:e.locationBanner.name}),Object(n.jsx)("div",{className:w.a.bannerDes,children:e.locationBanner.description}),Object(n.jsx)("img",{className:w.a.bannerPhoto,src:e.locationBanner.photo})]}),Object(n.jsxs)("div",{className:w.a.location,children:[Object(n.jsx)("div",{className:w.a.titleShow,children:"\u641c\u5c0b\u7d50\u679c"}),Object(n.jsx)("div",{className:w.a.locationShow,children:e.locationArray})]})]})},B={API_KEY:"AIzaSyB3k7sX8JtuhiokD-xfe9UgOIltB4HtkrM"},A=a(53),E=a(71),P=Object(E.compose)(Object(E.withProps)({googleMapURL:"https://maps.googleapis.com/maps/api/js?key=".concat(B.API_KEY,"&v=3.exp&libraries=geometry,drawing,places"),loadingElement:Object(n.jsx)("div",{style:{height:"100%"}}),containerElement:Object(n.jsx)("div",{style:{height:"100vh",width:"100%"}}),mapElement:Object(n.jsx)("div",{style:{height:"100%"}})}),A.withScriptjs,A.withGoogleMap)((function(e){return Object(n.jsx)(i.Fragment,{children:Object(n.jsx)(A.GoogleMap,{center:e.center,zoom:e.zoom,children:e.locationDetail.map((function(t,a){return Object(n.jsx)(A.Marker,{position:t.pos,onClick:function(n){return e.markerClickHandler(n,t,Math.floor(a/3))},children:e.infoOpen&&e.selectedPlace.pos==t.pos&&Object(n.jsx)(A.InfoWindow,{onCloseClick:function(){return e.setInfoOpen(!1)},children:Object(n.jsx)("div",{children:Object(n.jsx)("h3",{children:e.selectedPlace.name})})})},t.id)}))})})})),M=j.firestore(),T=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var i;return Object(s.a)(this,a),(i=t.call(this,e)).componentDidMount=function(){M.collection("country").doc(i.props.match.params.tags).collection("location").get().then((function(e){var t=[];e.forEach((function(e){t.push({name:e.data().name,country:e.data().Country,city:e.data().City,area:e.data().Area,photo:e.data().PointImgUrl,pos:{lat:parseFloat(e.data().latitude,10),lng:parseFloat(e.data().longitude,10)},latitude:parseFloat(e.data().latitude,10),longitude:parseFloat(e.data().longitude,10),address:e.data().address,open_time:e.data().open_time,telephone:e.data().telephone,star_level:e.data().star_level,travelPoint:e.data().TravelPoint_Be_Added_Count,url:e.data().url,id:parseInt(e.data().id)})}));var a=t.map((function(e,t){return Object(n.jsxs)("div",{id:e.id,"data-column":Math.floor(t/3),onClick:function(a){return i.markerClickHandler(a.target.tagName,e,Math.floor(t/3))},className:w.a.item,onMouseOver:function(){document.getElementById("like-".concat(e.id)).style.display="block",i.state.likeList.find((function(t){return t.id===e.id}))?(document.getElementById("like-".concat(e.id)).style.fill="rgb(255, 128, 191)",document.getElementById("like-".concat(e.id)).style["fill-opacity"]=1):(document.getElementById("like-".concat(e.id)).style.fill="rgb(255, 255, 255)",document.getElementById("like-".concat(e.id)).style["fill-opacity"]=.3)},onMouseLeave:function(){i.state.likeList.find((function(t){return t.id===e.id}))||(document.getElementById("like-".concat(e.id)).style.display="none")},children:[Object(n.jsx)("img",{src:e.photo,className:w.a.itemPhoto}),Object(n.jsx)("div",{className:w.a.itemName,children:e.name}),Object(n.jsx)("div",{children:e.star_level}),Object(n.jsx)("div",{id:"like-".concat(e.id),className:w.a.itemLike,onClick:function(){return i.handleLike(e)},children:Object(n.jsxs)("svg",{id:"icon-heart",viewBox:"0 0 32 32",width:"30",height:"20",children:[Object(n.jsx)("title",{children:"heart"}),Object(n.jsx)("path",{d:"M29.306 4.768c-1.662-1.66-3.958-2.687-6.493-2.687s-4.831 1.027-6.493 2.687l-0.32 0.32-0.32-0.32c-1.662-1.664-3.96-2.694-6.498-2.694-5.072 0-9.183 4.112-9.183 9.183 0 2.534 1.026 4.828 2.686 6.49l11.363 11.373c0.499 0.496 1.187 0.803 1.947 0.803s1.448-0.307 1.947-0.803l11.353-11.36c1.671-1.66 2.705-3.96 2.705-6.501 0-2.536-1.030-4.832-2.695-6.491l-0-0z"})]})})]},e.id)}));i.setState({locationDetail:t,locationArray:a,locationArrayT:a})})),M.collection("indexCountry").get().then((function(e){var t,a,n;e.forEach((function(e){e.data().name===i.props.match.params.tags&&(t={name:e.data().name,description:e.data().description,photo:e.data().photo,latitude:parseFloat(e.data().latitude,10),longitude:parseFloat(e.data().longitude,10),zoom_level:parseFloat(e.data().zoom_level,10)},a={lat:parseFloat(e.data().latitude),lng:parseFloat(e.data().longitude)},n=parseFloat(e.data().zoom_level))})),i.setState({locationBanner:t,center:a,zoom:n})})),M.collection("schedule").doc("userId").onSnapshot((function(e){void 0===e.data().like?M.collection("schedule").doc("userId").set({like:[]},{merge:!0}):(i.setState({likeList:e.data().like}),e.data().like.forEach((function(e){null!==document.getElementById("like-".concat(e.id))&&(document.getElementById("like-".concat(e.id)).style.display="block",document.getElementById("like-".concat(e.id)).style.fill="rgb(255, 128, 191)",document.getElementById("like-".concat(e.id)).style["fill-opacity"]=1)})))}))},i.loadOptions=function(){var e=Object(m.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=t.toLowerCase().replace(/\W/g,""),e.abrupt("return",new Promise((function(e){M.collection("country").doc(i.props.match.params.tags).collection("location").orderBy("plainName").startAt(t).endAt(t+"\uf8ff").get().then((function(t){if(t.empty)return e([]);var a=[];return t.forEach((function(e){var t={value:e.id,label:e.data().tagName};a.push(t)})),e(a)}))})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.handleOnChange=function(e){i.state.locationDetail.map((function(t,a){if(e.value===t.name){var o=Object(L.a)(i.state.locationArrayT),c=Object(v.a)();o.splice(3*Math.floor(a/3)+3,0,Object(n.jsxs)("div",{id:"show",className:w.a.itemSelect,children:[Object(n.jsx)("img",{src:t.photo,className:w.a.itemSelectPhoto}),Object(n.jsxs)("div",{className:w.a.selectDetail,children:[Object(n.jsx)("div",{className:w.a.itemName,children:t.name}),Object(n.jsx)("div",{children:t.address}),Object(n.jsx)("div",{children:t.telephone}),Object(n.jsx)("div",{children:t.star_level})]})]},c)),i.setState({selectedPlace:t,locationArray:o})}})),i.state.infoOpen&&i.setState({infoOpen:!1}),i.setState({infoOpen:!0}),i.state.zoom<13&&i.setState({zoom:13}),window.setTimeout((function(){return document.getElementById("show").scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}),10)},i.markerClickHandler=function(e,t,a){if("path"!==e){var o=Object(L.a)(i.state.locationArrayT),c=Object(v.a)();o.splice(3*a+3,0,Object(n.jsxs)("div",{id:"show",className:w.a.itemSelect,children:[Object(n.jsx)("img",{src:t.photo,className:w.a.itemSelectPhoto}),Object(n.jsxs)("div",{className:w.a.selectDetail,children:[Object(n.jsx)("div",{className:w.a.itemName,children:t.name}),Object(n.jsx)("div",{children:t.address}),Object(n.jsx)("div",{children:t.telephone}),Object(n.jsx)("div",{children:t.star_level})]})]},c)),i.setState({selectedPlace:t,locationArray:o}),i.state.infoOpen&&i.setState({infoOpen:!1}),i.setState({infoOpen:!0}),i.state.zoom<13&&i.setState({zoom:13}),window.setTimeout((function(){return document.getElementById("show").scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}),10)}},i.setInfoOpen=function(e){i.setState({infoOpen:e})},i.handleLike=function(e){var t=Object(L.a)(i.state.likeList),a={country:e.country,name:e.name,id:e.id,pos:{lat:e.latitude,lng:e.longitude}};if(0===t.length)document.getElementById("like-".concat(e.id)).style.fill="rgb(255, 128, 191)",document.getElementById("like-".concat(e.id)).style["fill-opacity"]=1,t.push(a),M.collection("schedule").doc("userId").set({like:t},{merge:!0});else if(t.find((function(t){return t.id===e.id}))){document.getElementById("like-".concat(e.id)).style.fill="rgb(255, 255, 255)",document.getElementById("like-".concat(e.id)).style["fill-opacity"]=.3;var n=t.filter((function(t){return t.id!==e.id}));M.collection("schedule").doc("userId").set({like:n},{merge:!0})}else document.getElementById("like-".concat(e.id)).style.fill="rgb(255, 128, 191)",document.getElementById("like-".concat(e.id)).style["fill-opacity"]=1,t.push(a),M.collection("schedule").doc("userId").set({like:t},{merge:!0})},i.state={locationBanner:[],locationDetail:[],center:{},zoom:15,selectedPlace:{},infoOpen:!1,locationArray:[],locationArrayT:[],likeList:[]},i}return Object(r.a)(a,[{key:"render",value:function(){return Object(n.jsxs)("div",{className:w.a.locationAll,children:[Object(n.jsxs)("div",{className:w.a.left,children:[Object(n.jsx)("div",{className:w.a.navBar,children:Object(n.jsxs)("div",{className:w.a.icon1,id:"icon1",onClick:function(){document.querySelector("#icon1").classList.toggle(w.a.open)},children:[Object(n.jsx)("span",{}),Object(n.jsx)("span",{}),Object(n.jsx)("span",{})]})}),Object(n.jsxs)("div",{className:w.a.navBarList,children:[Object(n.jsx)(k.b,{to:"/",children:"Home"}),Object(n.jsx)(k.b,{to:"/schedule",children:"\u884c\u7a0b\u898f\u5283"}),Object(n.jsx)(k.b,{to:"/member",children:"\u6703\u54e1\u767b\u5165"})]}),Object(n.jsx)("div",{className:w.a.title,children:"\u6311\u9078\u666f\u9ede"}),Object(n.jsx)(b.a,{className:w.a.locationInput,loadOptions:this.loadOptions,onChange:this.handleOnChange}),Object(n.jsx)(C,{locationArray:this.state.locationArray,locationBanner:this.state.locationBanner})]}),Object(n.jsx)("div",{className:w.a.right,children:Object(n.jsx)(P,{locationDetail:this.state.locationDetail,locationBanner:this.state.locationBanner,center:this.state.center,zoom:this.state.zoom,selectedPlace:this.state.selectedPlace,infoOpen:this.state.infoOpen,markerClickHandler:this.markerClickHandler,setInfoOpen:this.setInfoOpen})})]})}}]),a}(o.a.Component),F=a(72),z=(a(539),a(322)),G=(a(648),a(11)),R=a.n(G),U=j.firestore(),Y=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState({value:e.target.value})},n.handleSubmit=function(e){e.preventDefault(),U.collection("schedule").doc("userId").collection("data").doc("travel"+n.state.size).set({CoverImgUrl:"http://img01.jituwang.com/171115/256774-1G11521320727.jpg",EndDate:n.state.endDateSubmit,EndDateStamp:n.state.endDateStamp,ImMultiEditMember:!1,ShareLink:"",StartDate:n.state.startDateSubmit,StartDateStamp:n.state.startDateStamp,TotalDay:n.state.totalDay,TravelScheduleDetailInfos:[],TravelScheduleName:n.state.value,comment:"",id:n.state.size,dateBlock:n.state.dateBlock});for(var t=0;t<n.state.totalDay;t++)U.collection("schedule").doc("userId").collection("data").doc("travel"+n.state.size).collection("dateBlockDetail").doc(n.state.dateBlock[t]).set({id:t,name:n.state.dateBlock[t],morning:[],afternoon:[],night:[]});alert("Submitted: "+n.state.startDateSubmit+"~"+n.state.endDateSubmit),n.setState({value:""})},n.onDatesChange=function(e){for(var t=e.startDate,a=e.endDate,i=R()(t).format("MM/DD/YYYY"),o=R()(a).format("MM/DD/YYYY"),c=R()(o)-R()(i),l=Math.floor(c/864e5)+1,s=R()(t).valueOf(),r=R()(a).valueOf(),d=[],u=s;u<r+1;u+=864e5)d.push(R()(u).format("MM-DD-YYYY"));n.setState({startDate:t,startDateStamp:s,endDate:a,endDateStamp:r,startDateSubmit:i,endDateSubmit:o,totalDay:l,dateBlock:d})},n.onFocusChange=function(e){n.setState({focusedInput:e})},n.handleDate=function(e){n.setState({date:e})},n.state={value:"",focusedInput:"",startDate:"",endDate:"",startDateStamp:null,endDateStamp:null,date:"",startDateSubmit:"",endDateSubmit:"",totalDay:"",size:null,dateBlock:[]},n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;U.collection("schedule").doc("userId").collection("data").get().then((function(t){e.setState({size:t.size})}))}},{key:"render",value:function(){return Object(n.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(n.jsxs)("label",{children:[Object(n.jsxs)("div",{children:["enter trip name:",Object(n.jsx)("input",{type:"text",value:this.state.value,onChange:this.handleChange})]}),Object(n.jsx)("div",{children:Object(n.jsx)(z.DateRangePicker,{onDatesChange:this.onDatesChange,onFocusChange:this.onFocusChange,focusedInput:this.state.focusedInput,startDate:this.state.startDate,endDate:this.state.endDate,onChange:this.handleDate,value:this.state.date})}),Object(n.jsx)("div",{children:this.state.date})]}),Object(n.jsx)("input",{type:"submit",value:"Submit"})]})}}]),a}(o.a.Component),W=a(9),H=a.n(W),J=a(44),K=a(67),V=j.firestore(),q=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var i;return Object(s.a)(this,a),(i=t.call(this,e)).loadOptionsCountry=function(){var e=Object(m.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){V.collection("indexCountry").orderBy("name").startAt(t).endAt(t+"\uf8ff").get().then((function(t){if(t.empty)return e([]);var a=[];return t.forEach((function(e){var t={value:{lat:e.data().latitude,lng:e.data().longitude},label:e.data().name};a.push(t),i.setState({value:e.data().name})})),e(a)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.loadOptions=function(){var e=Object(m.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){V.collection("country").doc(i.state.value).collection("location").orderBy("name").startAt(t).endAt(t+"\uf8ff").get().then((function(t){if(t.empty)return e([]);var a=[];return t.forEach((function(e){var t={value:e.id,label:e.data().name};a.push(t),i.setState({countryId:e.data().id})})),e(a)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.handleOnChangeCountry=function(){i.props.getCountry(i.state.value),V.collection("country").doc(i.state.value).collection("location").get().then((function(e){var t=[];e.forEach((function(e){t.push({name:e.data().name,country:e.data().Country,city:e.data().City,area:e.data().Area,photo:e.data().PointImgUrl,pos:{lat:parseFloat(e.data().latitude,10),lng:parseFloat(e.data().longitude,10)},latitude:parseFloat(e.data().latitude,10),longitude:parseFloat(e.data().longitude,10),address:e.data().address,open_time:e.data().open_time,telephone:e.data().telephone,star_level:e.data().star_level,travelPoint:e.data().TravelPoint_Be_Added_Count,url:e.data().url,id:parseInt(e.data().id)})}));var a=t.map((function(e){return Object(n.jsx)(K.b,{draggableId:"id-".concat(e.id),index:e.id,children:function(t){return Object(n.jsxs)("div",Object(J.a)(Object(J.a)(Object(J.a)({id:e.id,className:H.a.item},t.draggableProps),t.dragHandleProps),{},{ref:t.innerRef,onMouseOver:function(){document.getElementById("likeSearch-".concat(e.id)).style.display="block",i.state.likeList.find((function(t){return t.id===e.id}))?(document.getElementById("likeSearch-".concat(e.id)).style.fill="rgb(255, 128, 191)",document.getElementById("likeSearch-".concat(e.id)).style["fill-opacity"]=1):(document.getElementById("likeSearch-".concat(e.id)).style.fill="rgb(255, 255, 255)",document.getElementById("likeSearch-".concat(e.id)).style["fill-opacity"]=.3)},onMouseLeave:function(){i.state.likeList.find((function(t){return t.id===e.id}))||(document.getElementById("likeSearch-".concat(e.id)).style.display="none")},children:[Object(n.jsx)("div",{id:"likeSearch-".concat(e.id),className:H.a.searchLike,onClick:function(){return i.handleLike(e)},children:Object(n.jsxs)("svg",{id:"icon-heart",viewBox:"0 0 32 32",width:"30",height:"20",children:[Object(n.jsx)("title",{children:"heart"}),Object(n.jsx)("path",{d:"M29.306 4.768c-1.662-1.66-3.958-2.687-6.493-2.687s-4.831 1.027-6.493 2.687l-0.32 0.32-0.32-0.32c-1.662-1.664-3.96-2.694-6.498-2.694-5.072 0-9.183 4.112-9.183 9.183 0 2.534 1.026 4.828 2.686 6.49l11.363 11.373c0.499 0.496 1.187 0.803 1.947 0.803s1.448-0.307 1.947-0.803l11.353-11.36c1.671-1.66 2.705-3.96 2.705-6.501 0-2.536-1.030-4.832-2.695-6.491l-0-0z"})]})}),Object(n.jsx)("img",{src:e.photo,className:H.a.itemPhoto}),Object(n.jsx)("div",{className:H.a.itemName,children:e.name}),Object(n.jsx)("div",{children:e.star_level})]}))}},e.id)}));i.setState({locationDetail:t,locationArray:a})}))},i.handleLike=function(e){var t={country:e.country,name:e.name,id:e.id,pos:{lat:e.latitude,lng:e.longitude}},a=Object(L.a)(i.state.likeList);i.state.likeList.find((function(t){return t.id===e.id}))?(document.getElementById("likeSearch-".concat(e.id)).style.fill="rgb(255, 255, 255)",document.getElementById("likeSearch-".concat(e.id)).style["fill-opacity"]=.3,a=Object(L.a)(i.state.likeList).filter((function(t){return t.id!==e.id}))):(document.getElementById("likeSearch-".concat(e.id)).style.fill="rgb(255, 128, 191)",document.getElementById("likeSearch-".concat(e.id)).style["fill-opacity"]=1,a.push(t));i.setState({likeList:a}),V.collection("schedule").doc("userId").set({like:a},{merge:!0})},i.state={value:"",countryId:"",locationDetail:[],locationArray:[],locationArrayT:[],likeList:[]},i}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;V.collection("schedule").doc("userId").onSnapshot((function(t){void 0===t.data().like?V.collection("schedule").doc("userId").set({like:[]},{merge:!0}):(e.setState({likeList:t.data().like}),""!==e.state.value&&t.data().like.forEach((function(e){null!==document.getElementById("likeSearch-".concat(e.id))&&(document.getElementById("likeSearch-".concat(e.id)).style.display="block")})))}))}},{key:"componentDidUpdate",value:function(e){var t=this;this.state.likeList!==e.likeList&&0!==this.state.likeList.length&&""!==this.state.value&&this.state.locationDetail.map((function(e){t.state.likeList.find((function(t){return t.id===e.id}))?(document.getElementById("likeSearch-".concat(e.id)).style.fill="rgb(255, 128, 191)",document.getElementById("likeSearch-".concat(e.id)).style["fill-opacity"]=1):document.getElementById("likeSearch-".concat(e.id)).style.display="none"}))}},{key:"handleOnChange",value:function(e){document.getElementById(e).scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}},{key:"render",value:function(){var e=this;return Object(n.jsxs)("div",{className:H.a.locationAll,children:[Object(n.jsxs)("div",{className:H.a.searchAll,children:[Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:H.a.title,children:"\u6311\u9078\u570b\u5bb6"}),Object(n.jsx)(b.a,{className:H.a.locationInput,loadOptions:this.loadOptionsCountry,onChange:this.handleOnChangeCountry})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:H.a.title,children:"\u6311\u9078\u666f\u9ede"}),Object(n.jsx)(b.a,{className:H.a.locationInput,loadOptions:this.loadOptions,onChange:function(){return e.handleOnChange(e.state.countryId)}})]})]}),Object(n.jsx)("div",{className:H.a.locationList,children:this.state.locationArray})]})}}]),a}(o.a.Component),Q=j.firestore(),X=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleLike=function(e){var t=n.state.locationLikeDetail.filter((function(t){return t.id!==e.id})),a=n.state.locationDetail.filter((function(t){return t.id!==e.id}));n.setState({locationLikeDetail:t}),console.log(a),Q.collection("schedule").doc("userId").set({like:a},{merge:!0})},n.state={locationDetail:[],locationLikeDetail:[]},n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=document.getElementsByClassName("likeLocationShow");Array.from(t).forEach((function(e){e.style.display="none"})),Q.collection("schedule").doc("userId").onSnapshot((function(t){e.setState({locationDetail:t.data().like});var a=[];t.data().like.map((function(t){Q.collection("country").doc(t.country).collection("location").where("id","==",t.id.toString()).get().then((function(t){t.forEach((function(t){a.push({name:t.data().name,country:t.data().Country,city:t.data().City,area:t.data().Area,photo:t.data().PointImgUrl,pos:{lat:parseFloat(t.data().latitude,10),lng:parseFloat(t.data().longitude,10)},address:t.data().address,open_time:t.data().open_time,telephone:t.data().telephone,star_level:t.data().star_level,travelPoint:t.data().TravelPoint_Be_Added_Count,url:t.data().url,id:parseInt(t.data().id)}),e.setState({locationLikeDetail:a})}))}))}))}))}},{key:"render",value:function(){var e=this;return Object(n.jsx)("div",{className:H.a.likeList,children:this.state.locationLikeDetail.map((function(t,a){return Object(n.jsx)(K.b,{draggableId:"Ld-".concat(t.id),index:a,children:function(a){return Object(n.jsxs)("div",Object(J.a)(Object(J.a)(Object(J.a)({id:10*t.id,className:H.a.item},a.draggableProps),a.dragHandleProps),{},{ref:a.innerRef,children:[Object(n.jsx)("div",{id:"like-".concat(t.id),className:H.a.itemLike,onClick:function(){return e.handleLike(t)},children:Object(n.jsxs)("svg",{id:"icon-heart",viewBox:"0 0 32 32",width:"30",height:"20",children:[Object(n.jsx)("title",{children:"heart"}),Object(n.jsx)("path",{d:"M29.306 4.768c-1.662-1.66-3.958-2.687-6.493-2.687s-4.831 1.027-6.493 2.687l-0.32 0.32-0.32-0.32c-1.662-1.664-3.96-2.694-6.498-2.694-5.072 0-9.183 4.112-9.183 9.183 0 2.534 1.026 4.828 2.686 6.49l11.363 11.373c0.499 0.496 1.187 0.803 1.947 0.803s1.448-0.307 1.947-0.803l11.353-11.36c1.671-1.66 2.705-3.96 2.705-6.501 0-2.536-1.030-4.832-2.695-6.491l-0-0z"})]})}),Object(n.jsx)("img",{src:t.photo,className:H.a.itemPhoto}),Object(n.jsx)("div",{className:H.a.itemName,children:t.name}),Object(n.jsx)("div",{children:t.star_level})]}))}},a)}))})}}]),a}(o.a.Component),Z=a(108),$=a(109),ee=a(323),te=[{value:"DRIVING",label:Object(n.jsx)(Z.a,{icon:$.b,title:"DRIVING"})},{value:"WALKING",label:Object(n.jsx)(Z.a,{icon:$.d,title:"WALKING"})},{value:"TRANSIT",label:Object(n.jsx)(Z.a,{icon:$.c,title:"TRANSIT"})},{value:"BICYCLING",label:Object(n.jsx)(Z.a,{icon:$.a,title:"BICYCLING"})}],ae=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).filterSelectedData=function(e){var t=Object.assign({},this.props.trafficDetail);t[this.props.date][this.props.num].travelMode=e.value,this.props.handleTraffic(t),console.log(t),this.setState({selectedFilter:e})},n.state={selectedFilter:""},n}return Object(r.a)(a,[{key:"render",value:function(){var e=this;return console.log(this.props.traffic),void 0!==this.props.traffic[this.props.date][this.props.num]&&Object(n.jsxs)("div",{children:[this.props.traffic[this.props.date][this.props.num].routes[0].legs[0].distance.text,Object(n.jsx)("br",{}),Object(n.jsxs)("div",{className:H.a.itemTraffic,children:[Object(n.jsx)(ee.a,{value:this.state.selectedFilter,onChange:function(t){return e.filterSelectedData(t)},options:te,placeholder:Object(n.jsx)(Z.a,{icon:$.b,title:"DRIVING"}),className:H.a.itemSelect}),this.props.traffic[this.props.date][this.props.num].routes[0].legs[0].duration.text]})]})}}]),a}(o.a.Component),ne=j.firestore(),ie=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).deleteLocation=function(t){var a=[],n=[];(a=Array.from(e.props.travelDetailCountry[e.props.date])).splice(t,1),a.forEach((function(e){var t={};t.country=e.Country,t.name=e.name,t.id=e.id,t.pos={lat:parseFloat(e.latitude),lng:parseFloat(e.longitude)},n.push(t)})),ne.collection("schedule").doc("userId").collection("data").doc("travel".concat(window.location.pathname.substring(23))).collection("dateBlockDetail").doc(e.props.date).set({morning:n,name:e.props.date})},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this;return console.log("this.props.traffic[this.props.item]",this.props.traffic[this.props.item]),Object(n.jsxs)("div",{children:[void 0===this.props.travelDetailCountry[this.props.item]&&Object(n.jsx)("div",{className:H.a.emptyList,children:"Drop Here!"}),this.props.travelDetailCountry[this.props.item]&&void 0!==this.props.traffic[this.props.item]&&this.props.travelDetailCountry[this.props.item].map((function(t,a){return Object(n.jsxs)("div",{children:[Object(n.jsx)(K.b,{draggableId:"Id-".concat(t.id),index:a,children:function(i){return Object(n.jsxs)("div",Object(J.a)(Object(J.a)(Object(J.a)({},i.draggableProps),i.dragHandleProps),{},{ref:i.innerRef,className:H.a.itemList,onMouseOver:function(){return document.getElementById("delete-".concat(t.id)).style.display="block"},onMouseLeave:function(){return document.getElementById("delete-".concat(t.id)).style.display="none"},onClick:function(){e.props.setInfoOpen(!0),e.props.setSelectedPlace(t)},children:[Object(n.jsx)("div",{className:H.a.itemListDelete,id:"delete-".concat(t.id),onClick:function(){e.deleteLocation(a)},children:"x"}),Object(n.jsx)("img",{src:t.PointImgUrl,className:H.a.itemPhoto}),Object(n.jsx)("div",{className:H.a.itemName,children:t.name}),Object(n.jsx)("div",{children:t.star_level})]}))}}),a<e.props.traffic[e.props.item].length&&void 0!==e.props.traffic[e.props.item]&&Object(n.jsx)(ae,{traffic:e.props.traffic,date:e.props.item,num:a,handleTraffic:e.props.handleTraffic,trafficDetail:e.props.trafficDetail})]},t.id)}))]})}}]),a}(o.a.Component),oe=j.firestore(),ce=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={travelDateDetail:[],travelDetailCountry:{}},n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=window.location.pathname.substring(23),a=[];oe.collection("schedule").doc("userId").collection("data").doc("travel".concat(t)).collection("dateBlockDetail").onSnapshot((function(t){a=[],t.forEach((function(e){a.push(e.data())})),e.setState({travelDateDetail:a});var n={};a.forEach((function(t){var a=[];0!==t.morning.length?t.morning.forEach((function(i,o){0!==t.morning.length&&oe.collection("country").doc(i.country).collection("location").where("id","==",i.id).get().then((function(i){i.forEach((function(e){a[o]=e.data()})),n[t.name]=a,e.setState({travelDetailCountry:n})}))})):e.setState({travelDetailCountry:{}})}))}))}},{key:"render",value:function(){var e=this;return Object(n.jsx)("div",{className:H.a.scheduleDateAll,children:this.state.travelDateDetail.map((function(t,a){return Object(n.jsx)(K.c,{droppableId:"drop-".concat(t.name),children:function(i){return Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:H.a.scheduleDateOnly,children:t.name}),Object(n.jsxs)("div",Object(J.a)(Object(J.a)({className:H.a.scheduleDetail,ref:i.innerRef},i.droppableProps),{},{children:[Object(n.jsx)(ie,{item:t.name,date:t.name,travelDetailCountry:e.state.travelDetailCountry,setInfoOpen:e.props.setInfoOpen,selectedPlace:e.props.selectedPlace,setSelectedPlace:e.props.setSelectedPlace,traffic:e.props.traffic,handleTraffic:e.props.handleTraffic,trafficDetail:e.props.trafficDetail}),i.placeholder]})),a==e.state.travelDateDetail.length-1&&Object(n.jsx)("div",{className:"findLocationShow",children:Object(n.jsx)(q,{getCountry:e.props.getCountry})}),a==e.state.travelDateDetail.length-1&&Object(n.jsx)("div",{className:"likeLocationShow",children:Object(n.jsx)(X,{})})]})}},a)}))})}}]),a}(o.a.Component),le=a(653).MarkerWithLabel,se=j.firestore(),re=Object(E.compose)(Object(E.withProps)({googleMapURL:"https://maps.googleapis.com/maps/api/js?key=".concat(B.API_KEY,"&v=3.exp&libraries=geometry,drawing,places"),loadingElement:Object(n.jsx)("div",{style:{height:"100%"}}),containerElement:Object(n.jsx)("div",{style:{height:"100vh",width:"100%"}}),mapElement:Object(n.jsx)("div",{style:{height:"100%"}})}),A.withScriptjs,A.withGoogleMap,Object(E.lifecycle)({componentDidUpdate:function(e){var t=this,a={},n=[];if(e.travelDataArr!==this.props.travelDataArr||e.trafficDetail!==this.props.trafficDetail){var i=new window.google.maps.DirectionsService;console.log("this.props.trafficDetail",this.props.trafficDetail),Object.keys(this.props.trafficDetail).map((function(e){var o=[];t.props.trafficDetail[e].forEach((function(c,l){i.route({origin:c.origin,destination:c.destination,travelMode:window.google.maps.TravelMode[c.travelMode]},(function(i,c){c===window.google.maps.DirectionsStatus.OK?(o[l]=i,location,console.log("locationArrTemp",o),a[e]=o,t.props.showTraffic(a),n.push(i),t.setState({directions:n})):console.error("error fetching directions ".concat(i))}))})),t.props.showTraffic(a)}))}}}))((function(e){var t=Object(i.useState)({}),a=Object(F.a)(t,2),o=a[0],c=a[1],l=Object(i.useState)([]),s=Object(F.a)(l,2),r=s[0],d=s[1];Object(i.useEffect)((function(){e.travelDataArr.forEach((function(e){if(0!==e.morning.length)se.collection("indexCountry").doc(e.morning[0].country).get().then((function(e){var t={};t.lat=parseFloat(e.data().latitude),t.lng=parseFloat(e.data().longitude),c(t)}));else{c({lat:25.049,lng:121.51557})}}));for(var t=[],a=e.travelDataArr.length,n="0123456789ABCDEF".split(""),i=0;i<a;i++){for(var o="#",l=0;l<6;l++)o+=n[Math.floor(16*Math.random())];t.push(o)}d(t)}),[e.travelDataArr]);return Object(n.jsxs)(A.GoogleMap,{defaultZoom:11,center:o,children:[e.travelDataArr.map((function(t,a){return t.morning.map((function(t,i){return Object(n.jsxs)("div",{children:[Object(n.jsx)(le,{position:t.pos,labelAnchor:new window.google.maps.Point(13,42),labelStyle:{backgroundColor:"".concat(r[a]),borderRadius:"99em",fontSize:"12px",fontWeight:"bold",width:"25px",height:"25px",textAlign:"center",verticalAlign:"bottom"},onClick:function(){e.setSelectedPlaceMarker(t),e.setInfoOpen(!0)},children:Object(n.jsx)("div",{className:H.a.markerText,children:i+1})}),Object(n.jsx)(A.Marker,{position:t.pos,children:e.infoOpen&&e.selectedPlace.pos.lat==t.pos.lat&&e.selectedPlace.pos.lng==t.pos.lng&&Object(n.jsx)(A.InfoWindow,{onCloseClick:function(){return e.setInfoOpen(!1)},children:Object(n.jsx)("div",{children:Object(n.jsx)("h3",{children:e.selectedPlace.name})})})})]},t.id)}))})),e.directions&&e.directions.map((function(e,t){return Object(n.jsx)(A.DirectionsRenderer,{directions:e,defaultOptions:{suppressMarkers:!0}},t)}))]})})),de=j.firestore(),ue=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).getCountry=function(e){n.setState({searchCountry:e})},n.onDragStart=function(e){var t=e.draggableId,a={};de.collection("schedule").doc("userId").collection("data").doc("travel".concat(n.state.travelShowId)).collection("dateBlockDetail").get().then((function(e){e.forEach((function(e){a[e.data().name]=e.data().morning})),n.setState({travelMorningAll:a}),console.log(a)})),"i"===t.substr(0,1)&&(console.log(e),de.collection("country").doc(n.state.searchCountry).collection("location").get().then((function(e){e.forEach((function(e){if(e.data().id===t.substring(3)){var a={country:n.state.searchCountry,name:e.data().name,id:e.data().id,pos:{lat:parseFloat(e.data().latitude),lng:parseFloat(e.data().longitude)}};n.setState({searchCountryDetail:a})}}))}))),"L"===t.substr(0,1)&&(console.log(e),de.collection("schedule").doc("userId").get().then((function(e){var a={};e.data().like.forEach((function(e){e.id.toString()===t.substring(3)&&((a=e).id=e.id.toString(),n.setState({locationLikeDetail:a}),console.log(a))}))})))},n.onDragEnd=function(e){var t=e.destination,a=e.source,i=e.draggableId;if(t){if(t.droppableId!==a.droppableId||t.index!==a.index){if("I"===i.substr(0,1))if(t.droppableId===a.droppableId&&t.index!==a.index){var o=[],c=(o=Array.from(n.state.travelMorningAll[a.droppableId.substring(5)])).splice(a.index,1),l=Object(F.a)(c,1)[0];o.splice(t.index,0,l),n.setState({travelMorning:o}),de.collection("schedule").doc("userId").collection("data").doc("travel".concat(n.state.travelShowId)).collection("dateBlockDetail").doc(t.droppableId.substring(5)).set({morning:o,name:t.droppableId.substring(5)})}else{var s=[],r=[];s=Array.from(n.state.travelMorningAll[a.droppableId.substring(5)]),r=Array.from(n.state.travelMorningAll[t.droppableId.substring(5)]);var d=s.splice(a.index,1),u=Object(F.a)(d,1)[0];r.splice(t.index,0,u),de.collection("schedule").doc("userId").collection("data").doc("travel".concat(n.state.travelShowId)).collection("dateBlockDetail").doc(a.droppableId.substring(5)).set({morning:s,name:a.droppableId.substring(5)}),de.collection("schedule").doc("userId").collection("data").doc("travel".concat(n.state.travelShowId)).collection("dateBlockDetail").doc(t.droppableId.substring(5)).set({morning:r,name:t.droppableId.substring(5)})}if("i"===i.substr(0,1)||"L"===i.substr(0,1)){var h=[];h=Array.from(n.state.travelMorningAll[t.droppableId.substring(5)]),"i"===i.substr(0,1)?h.splice(t.index,0,n.state.searchCountryDetail):h.splice(t.index,0,n.state.locationLikeDetail),n.setState({travelMorning:h}),de.collection("schedule").doc("userId").collection("data").doc("travel".concat(n.state.travelShowId)).collection("dateBlockDetail").doc(t.droppableId.substring(5)).set({morning:h,name:t.droppableId.substring(5)})}}}else console.log("no destination")},n.handleLocationShow=function(){document.getElementsByClassName("findLocationShow")[0].style.display="block",document.getElementsByClassName("likeLocationShow")[0].style.display="none"},n.handleCollectionShow=function(){document.getElementsByClassName("findLocationShow")[0].style.display="none",document.getElementsByClassName("likeLocationShow")[0].style.display="block"},n.setInfoOpen=function(e){n.setState({infoOpen:e})},n.setSelectedPlace=function(e){console.log(e);var t={lat:parseFloat(e.latitude),lng:parseFloat(e.longitude)};n.setState({selectedPlace:{pos:t,name:e.name}})},n.setSelectedPlaceMarker=function(e){console.log(e);var t={};t.pos={lat:e.pos.lat,lng:e.pos.lng},t.name=e.name,n.setState({selectedPlace:t})},n.showTraffic=function(e){console.log(e),n.setState({traffic:e})},n.handleTraffic=function(e){console.log(e),n.setState({trafficDetail:e})},n.state={travelData:[],travelShowId:null,travelMorning:[],travelMorningAll:{},searchCountry:"",searchCountryDetail:{},travelDataArr:[],locationLikeDetail:{},infoOpen:!1,selectedPlace:{},traffic:{},trafficDetail:{}},n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=window.location.pathname.substring(23);this.setState({travelShowId:t});var a=[];de.collection("schedule").doc("userId").collection("data").doc("travel".concat(t)).onSnapshot((function(t){a.push(t.data()),e.setState({travelData:a})})),de.collection("schedule").doc("userId").collection("data").doc("travel".concat(t)).collection("dateBlockDetail").onSnapshot((function(t){var a=[];t.forEach((function(e){a.push(e.data())})),e.setState({travelDataArr:a});var n={};a.forEach((function(e){var t=[];if(e.morning.length>1)for(var a=0;a<e.morning.length-1;a++){var i={};i.origin=new window.google.maps.LatLng(e.morning[a].pos.lat,e.morning[a].pos.lng),i.destination=new window.google.maps.LatLng(e.morning[a+1].pos.lat,e.morning[a+1].pos.lng),i.travelMode="DRIVING",i.id=a,t.push(i)}n[e.name]=t})),e.setState({trafficDetail:n})}))}},{key:"componentDidUpdate",value:function(e,t){if(t.travelDataArr!==this.state.travelDataArr){var a={};this.state.travelDataArr.forEach((function(e){var t=[];if(e.morning.length>1)for(var n=0;n<e.morning.length-1;n++){var i={};i.origin=new window.google.maps.LatLng(e.morning[n].pos.lat,e.morning[n].pos.lng),i.destination=new window.google.maps.LatLng(e.morning[n+1].pos.lat,e.morning[n+1].pos.lng),i.travelMode="DRIVING",i.id=n,t.push(i)}a[e.name]=t})),this.setState({trafficDetail:a})}}},{key:"render",value:function(){var e=this;return Object(n.jsxs)("div",{className:H.a.scheduleWithMap,children:[Object(n.jsxs)("div",{className:H.a.scheduleAll,children:[Object(n.jsxs)("div",{className:H.a.switchBtn,children:[Object(n.jsx)("button",{onClick:this.handleLocationShow,children:"\u666f\u9ede\u641c\u5c0b"}),Object(n.jsx)("button",{onClick:this.handleCollectionShow,children:"\u6211\u7684\u6536\u85cf"})]}),this.state.travelData.map((function(e){return Object(n.jsx)("div",{className:H.a.scheduleListAll,children:Object(n.jsxs)("div",{className:H.a.scheduleList,children:[Object(n.jsx)("div",{className:H.a.scheduleTitle,children:e.TravelScheduleName}),Object(n.jsxs)("div",{className:H.a.date,children:[e.StartDate," \uff5e ",e.EndDate]}),Object(n.jsx)("img",{className:H.a.schedulePhoto,src:e.CoverImgUrl})]})},e.id)})),Object(n.jsx)(K.a,{onDragEnd:this.onDragEnd,onDragStart:this.onDragStart,children:this.state.travelData.map((function(t){return Object(n.jsx)(ce,{getCountry:e.getCountry,setInfoOpen:e.setInfoOpen,selectedPlace:e.state.selectedPlace,setSelectedPlace:e.setSelectedPlace,traffic:e.state.traffic,handleTraffic:e.handleTraffic,trafficDetail:e.state.trafficDetail},t)}))})]}),Object(n.jsx)("div",{className:H.a.scheduleMap,children:Object(n.jsx)(re,{travelDataArr:this.state.travelDataArr,infoOpen:this.state.infoOpen,setInfoOpen:this.setInfoOpen,selectedPlace:this.state.selectedPlace,setSelectedPlaceMarker:this.setSelectedPlaceMarker,travelShowId:this.state.travelShowId,showTraffic:this.showTraffic,trafficDetail:this.state.trafficDetail})})]})}}]),a}(o.a.Component),he=a(26),pe=j.firestore(),me=function(e){var t=Object(he.g)(),a=t.path,o=t.url,c=Object(i.useState)([]),l=Object(F.a)(c,2),s=l[0],r=l[1],d=Object(i.useState)(null),u=Object(F.a)(d,2),h=u[0],p=u[1],m=Object(he.f)(),f=m.pathname.charAt(m.pathname.length-1);return Object(i.useEffect)((function(){pe.collection("schedule").doc("userId").collection("data").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(e.data())})),r(t)}))}),[]),Object(n.jsxs)("div",{className:H.a.scheduleLayout,children:[Object(n.jsxs)("ul",{className:H.a.scheduleNav,children:[Object(n.jsx)("li",{onClick:function(){return p(null)},children:Object(n.jsx)(k.b,{to:"".concat(o,"/addSchedule"),children:"\u65b0\u589e\u884c\u7a0b"})}),Object(n.jsx)("li",{onClick:function(){return p(null)},children:Object(n.jsx)(k.b,{to:"/schedule",children:"\u6240\u6709\u884c\u7a0b"})})]}),Object(n.jsxs)("div",{className:H.a.scheduleListRange,children:[null===h&&"e"==f&&Object(n.jsx)("div",{className:H.a.scheduleListDetail,children:s.map((function(t){return Object(n.jsx)("div",{id:t.id,children:Object(n.jsxs)("div",{className:H.a.scheduleList,onClick:function(){p(t.id),e.history.push("".concat(o,"/editSchedule/").concat(t.id))},children:[Object(n.jsx)("div",{className:H.a.scheduleTitle,children:t.TravelScheduleName}),Object(n.jsxs)("div",{className:H.a.date,children:[t.StartDate," \uff5e ",t.EndDate]}),Object(n.jsx)("img",{className:H.a.schedulePhoto,src:t.CoverImgUrl})]})},t.id)}))}),Object(n.jsxs)("div",{children:[Object(n.jsx)(he.a,{path:"".concat(a,"/addSchedule"),component:Y}),Object(n.jsx)(he.a,{path:"".concat(a,"/editSchedule/:travelShow"),component:ue})]})]})]})},fe=a(324),je=a.n(fe),be=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){return Object(n.jsx)(k.a,{children:Object(n.jsx)("div",{className:je.a.app,children:Object(n.jsxs)(he.c,{children:[Object(n.jsx)(he.a,{exact:!0,path:"/",component:I}),Object(n.jsx)(he.a,{exact:!0,path:"/locationDetail/:tags",component:T}),Object(n.jsx)(he.a,{path:"/schedule",component:me}),Object(n.jsx)(he.a,{path:"/member",component:D})]})})})}}]),a}(o.a.Component),ve=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,656)).then((function(t){var a=t.getCLS,n=t.getFID,i=t.getFCP,o=t.getLCP,c=t.getTTFB;a(e),n(e),i(e),o(e),c(e)}))};l.a.render(Object(n.jsx)(be,{}),document.getElementById("root")),ve()},9:function(e,t,a){e.exports={scheduleListDetail:"schedule_scheduleListDetail__3qMA0",scheduleList:"schedule_scheduleList__NO_eD",scheduleLayout:"schedule_scheduleLayout__29TPw",scheduleListRange:"schedule_scheduleListRange__14W2t",schedulePhoto:"schedule_schedulePhoto__37BkL",scheduleTitle:"schedule_scheduleTitle__1YDf7",date:"schedule_date__2GO-0",scheduleNav:"schedule_scheduleNav__1_tqN",scheduleListAll:"schedule_scheduleListAll__2QeDR",scheduleDetail:"schedule_scheduleDetail__vGFeD",emptyList:"schedule_emptyList__2h6ZB",scheduleAll:"schedule_scheduleAll__2Mnlj",scheduleDateAll:"schedule_scheduleDateAll__31z0_",scheduleDateOnly:"schedule_scheduleDateOnly__2yywU",switchBtn:"schedule_switchBtn__mkTm2",likeList:"schedule_likeList__2sicR",item:"schedule_item__UDFGa",itemList:"schedule_itemList__2z7wa",itemPhoto:"schedule_itemPhoto__3grB0",itemListDelete:"schedule_itemListDelete__OwiN7",itemLike:"schedule_itemLike__rI0GL",searchLike:"schedule_searchLike__26w5O",searchAll:"schedule_searchAll__1szFM",locationList:"schedule_locationList__2UEoS",scheduleMap:"schedule_scheduleMap__3ERXu",markerText:"schedule_markerText__3eU_A",itemTraffic:"schedule_itemTraffic__2wlQ8",itemSelect:"schedule_itemSelect__nW2in"}}},[[655,1,2]]]);
//# sourceMappingURL=main.3a0b8342.chunk.js.map